{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\n// ‚úÖ A√±ade esta verificaci√≥n\r\nconsole.log(\"Supabase URL:\", supabaseUrl);\r\nconsole.log(\"Supabase Key:\", supabaseAnonKey);\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error('Missing Supabase environment variables');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN,4BAA4B;AAC5B,QAAQ,GAAG,CAAC,iBAAiB;AAC7B,QAAQ,GAAG,CAAC,iBAAiB;AAE7B;;AAIO,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/hooks/useNotifications.ts"],"sourcesContent":["// src/hooks/useNotifications.ts\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { supabase } from '../lib/supabaseClient';\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  user_id: string;\r\n  organization_id: string;\r\n  type: string;\r\n  title: string;\r\n  message: string;\r\n  data: any;\r\n  is_read: boolean;\r\n  created_at: string;\r\n  date: string; // ‚úÖ A√ëADIDO: Propiedad requerida por NotificationsDropdown\r\n}\r\n\r\nexport function useNotifications(userId: string | null) {\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const loadNotifications = useCallback(async () => {\r\n    if (!userId) {\r\n      setNotifications([]);\r\n      setUnreadCount(0);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('notifications')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .order('created_at', { ascending: false })\r\n        .limit(20);\r\n\r\n      if (error) throw error;\r\n\r\n      // ‚úÖ Mapear para a√±adir la propiedad `date` basada en `created_at`\r\n      const notificationsWithDate = (data || []).map((n: any) => ({\r\n        ...n,\r\n        date: n.created_at // Convertir created_at ‚Üí date\r\n      }));\r\n\r\n      setNotifications(notificationsWithDate);\r\n      setUnreadCount(notificationsWithDate.filter((n: Notification) => !n.is_read).length);\r\n    } catch (error) {\r\n      console.error('Error loading notifications:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [userId]);\r\n\r\n  const markAsRead = useCallback(async (notificationId: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .update({ is_read: true })\r\n        .eq('id', notificationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev =>\r\n        prev.map(n => (n.id === notificationId ? { ...n, is_read: true } : n))\r\n      );\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    } catch (error) {\r\n      console.error('Error marking notification as read:', error);\r\n    }\r\n  }, []);\r\n\r\n  const markAllAsRead = useCallback(async () => {\r\n    if (!userId) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .update({ is_read: true })\r\n        .eq('user_id', userId)\r\n        .eq('is_read', false);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev => prev.map(n => ({ ...n, is_read: true })));\r\n      setUnreadCount(0);\r\n    } catch (error) {\r\n      console.error('Error marking all notifications as read:', error);\r\n    }\r\n  }, [userId]);\r\n\r\n  const deleteNotification = useCallback(async (notificationId: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .delete()\r\n        .eq('id', notificationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev => prev.filter(n => n.id !== notificationId));\r\n      // Actualizar contador si la notificaci√≥n eliminada estaba sin leer\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    } catch (error) {\r\n      console.error('Error deleting notification:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadNotifications();\r\n\r\n    if (!userId) return;\r\n\r\n    const channel = supabase\r\n      .channel(`notifications:${userId}`)\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'notifications',\r\n          filter: `user_id=eq.${userId}`\r\n        },\r\n        (payload) => {\r\n          console.log('Realtime event:', payload.eventType, payload);\r\n\r\n          if (payload.eventType === 'INSERT') {\r\n            // Nueva notificaci√≥n\r\n            const newNotification = {\r\n              ...(payload.new as any),\r\n              date: (payload.new as any).created_at // ‚úÖ A√±adir date\r\n            };\r\n            setNotifications(prev => [newNotification as Notification, ...prev]);\r\n            if (!(payload.new as any).is_read) {\r\n              setUnreadCount(prev => prev + 1);\r\n            }\r\n          } else if (payload.eventType === 'UPDATE') {\r\n            // Notificaci√≥n actualizada (marcada como le√≠da/no le√≠da)\r\n            const oldNotification = notifications.find(n => n.id === payload.old.id);\r\n            const newNotification = {\r\n              ...(payload.new as any),\r\n              date: (payload.new as any).created_at // ‚úÖ A√±adir date\r\n            } as Notification;\r\n\r\n            setNotifications(prev =>\r\n              prev.map(n => (n.id === newNotification.id ? { ...n, ...newNotification } : n))\r\n            );\r\n\r\n            // Actualizar contador si cambi√≥ el estado de lectura\r\n            if (oldNotification && oldNotification.is_read !== newNotification.is_read) {\r\n              if (newNotification.is_read) {\r\n                setUnreadCount(prev => Math.max(0, prev - 1));\r\n              } else {\r\n                setUnreadCount(prev => prev + 1);\r\n              }\r\n            }\r\n          } else if (payload.eventType === 'DELETE') {\r\n            // Notificaci√≥n eliminada\r\n            const deletedNotification = payload.old as Notification;\r\n            setNotifications(prev => prev.filter(n => n.id !== deletedNotification.id));\r\n            \r\n            // Actualizar contador si la notificaci√≥n eliminada estaba sin leer\r\n            if (!deletedNotification.is_read) {\r\n              setUnreadCount(prev => Math.max(0, prev - 1));\r\n            }\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [userId, loadNotifications, notifications]);\r\n\r\n  return {\r\n    notifications,\r\n    unreadCount,\r\n    loading: loading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n    reload: loadNotifications\r\n  };\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/components/Gallery.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n\r\nexport default function Gallery() {\r\n  const router = useRouter();\r\n\r\n  const [selectedTags, setSelectedTags] = useState<string[]>([]);\r\n  const [images, setImages] = useState<any[]>([]);\r\n  const [allTags, setAllTags] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [uploadError, setUploadError] = useState<string | null>(null);\r\n  const [uploadSuccess, setUploadSuccess] = useState(false);\r\n  const [hotelId, setHotelId] = useState<string | null>(null);\r\n\r\n  // Modal de eliminaci√≥n\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [imageToDelete, setImageToDelete] = useState<{ id: string; url: string } | null>(null);\r\n\r\n  // Obtener hotel_id\r\n  useEffect(() => {\r\n    const getHotelId = async () => {\r\n      try {\r\n        const { data: session } = await supabase.auth.getSession();\r\n        if (!session.session) return router.push('/login');\r\n\r\n        const userId = session.session.user.id;\r\n\r\n        const { data: org } = await supabase\r\n          .from('organizations')\r\n          .select('id, role')\r\n          .eq('created_by', userId)\r\n          .eq('role', 'hotel')\r\n          .single();\r\n\r\n        if (!org) {\r\n          alert('No tienes un hotel asociado');\r\n          return router.push('/dashboard');\r\n        }\r\n\r\n        setHotelId(org.id);\r\n      } catch (err) {\r\n        console.error('Error al obtener hotel_id:', err);\r\n        router.push('/login');\r\n      }\r\n    };\r\n\r\n    getHotelId();\r\n  }, [router]);\r\n\r\n  // Cargar tags\r\n  useEffect(() => {\r\n    const loadTags = async () => {\r\n      try {\r\n        const { data } = await supabase\r\n          .from('media')\r\n          .select('tags')\r\n          .neq('tags', null);\r\n\r\n        const setTags = new Set<string>();\r\n        data?.forEach(item => item.tags?.forEach((t: string) => setTags.add(t)));\r\n\r\n        setAllTags([...setTags]);\r\n      } catch (err) {\r\n        console.error('Error al cargar tags:', err);\r\n      }\r\n    };\r\n\r\n    loadTags();\r\n  }, []);\r\n\r\n  // Cargar im√°genes\r\n  const loadImages = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      let query = supabase\r\n        .from('media')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (selectedTags.length > 0) {\r\n        query = query.contains('tags', selectedTags);\r\n      }\r\n\r\n      const { data, error } = await query;\r\n      if (error) throw error;\r\n\r\n      setImages(data || []);\r\n    } catch (err) {\r\n      console.error('Error al cargar im√°genes:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadImages();\r\n  }, [selectedTags]);\r\n\r\n  const toggleTag = (tag: string) => {\r\n    setSelectedTags(prev =>\r\n      prev.includes(tag) ? prev.filter(t => t !== tag) : [...prev, tag]\r\n    );\r\n  };\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    if (!file.type.startsWith('image/')) {\r\n      setUploadError('Solo se permiten im√°genes');\r\n      return;\r\n    }\r\n\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      setUploadError('La imagen es demasiado grande (max. 5MB)');\r\n      return;\r\n    }\r\n\r\n    setSelectedFile(file);\r\n    setUploadError(null);\r\n  };\r\n\r\n  const handleUpload = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!selectedFile || !hotelId) {\r\n      setUploadError('Selecciona una imagen y aseg√∫rate de tener un hotel');\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    setUploadError(null);\r\n    setUploadSuccess(false);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', selectedFile);\r\n      formData.append('hotel_id', hotelId);\r\n\r\n      const response = await fetch('/api/upload', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(result.error || 'Error al subir imagen');\r\n      }\r\n\r\n      setUploadSuccess(true);\r\n      setSelectedFile(null);\r\n      await loadImages();\r\n\r\n      setTimeout(() => setUploadSuccess(false), 3000);\r\n    } catch (err: any) {\r\n      setUploadError(err.message);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  // Abrir modal\r\n  const requestDelete = (id: string, url: string) => {\r\n    setImageToDelete({ id, url });\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  // Confirmar eliminaci√≥n\r\n  const confirmDelete = async () => {\r\n    if (!imageToDelete) return;\r\n\r\n    try {\r\n      const fileName = imageToDelete.url.split('/').pop();\r\n\r\n      await supabase.storage.from('media').remove([fileName!]);\r\n      await supabase.from('media').delete().eq('id', imageToDelete.id);\r\n\r\n      await loadImages();\r\n    } catch (err) {\r\n      console.error('Error al eliminar imagen:', err);\r\n    } finally {\r\n      setShowDeleteModal(false);\r\n      setImageToDelete(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-4\">\r\n      {/* SUBIDA */}\r\n      <div className=\"mb-8 bg-white rounded-xl shadow-sm p-6 border border-gray-100\">\r\n        <div className=\"flex items-center mb-4\">\r\n          <div className=\"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center mr-3\">\r\n            <svg className=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n            </svg>\r\n          </div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Subir Nueva Imagen</h3>\r\n        </div>\r\n\r\n        <input\r\n          type=\"file\"\r\n          id=\"image-upload\"\r\n          className=\"hidden\"\r\n          accept=\"image/jpeg, image/png, image/webp\"\r\n          onChange={handleFileChange}\r\n        />\r\n\r\n        <label\r\n          htmlFor=\"image-upload\"\r\n          className=\"w-full cursor-pointer flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-xl bg-gray-50 hover:border-blue-400 hover:bg-blue-50 transition-all\"\r\n        >\r\n          <span className=\"text-gray-700 text-sm font-medium\">Seleccionar archivo</span>\r\n        </label>\r\n\r\n        {selectedFile && (\r\n          <div className=\"mt-3 flex items-center justify-between p-3 bg-gray-50 rounded-lg border\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-900\">{selectedFile.name}</p>\r\n              <p className=\"text-xs text-gray-500\">{(selectedFile.size / 1024).toFixed(1)} KB</p>\r\n            </div>\r\n            <button onClick={() => setSelectedFile(null)} className=\"text-gray-400 hover:text-gray-600\">\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={handleUpload}\r\n          disabled={!selectedFile || uploading || !hotelId}\r\n          className={`w-full mt-4 py-3.5 rounded-xl text-white font-medium transition-all ${\r\n            !selectedFile || uploading || !hotelId\r\n              ? 'bg-blue-500 opacity-50 cursor-not-allowed'\r\n              : 'bg-blue-500 hover:bg-blue-600 hover:shadow-md'\r\n          }`}\r\n        >\r\n          {uploading ? 'Procesando...' : 'Subir y Analizar con IA'}\r\n        </button>\r\n      </div>\r\n\r\n      {/* FILTROS */}\r\n      <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\r\n        <h3 className=\"font-semibold mb-2\">Filtrar por:</h3>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {allTags.map(tag => (\r\n            <button\r\n              key={tag}\r\n              onClick={() => toggleTag(tag)}\r\n              className={`px-3 py-1 rounded-full text-sm ${\r\n                selectedTags.includes(tag)\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'bg-gray-200 hover:bg-gray-300'\r\n              }`}\r\n            >\r\n              {tag}\r\n            </button>\r\n          ))}\r\n        </div>\r\n        {selectedTags.length > 0 && (\r\n          <button onClick={() => setSelectedTags([])} className=\"mt-2 text-sm text-blue-600 hover:underline\">\r\n            Limpiar filtros\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* GALER√çA */}\r\n      {loading ? (\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\r\n        </div>\r\n      ) : images.length === 0 ? (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          {selectedTags.length > 0\r\n            ? 'No se encontraron im√°genes con estos tags'\r\n            : 'No hay im√°genes disponibles. ¬°Sube tu primera imagen!'}\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n          {images.map(img => (\r\n            <div\r\n              key={img.id}\r\n              className=\"border rounded-xl overflow-hidden bg-white shadow-sm hover:shadow-md transition group\"\r\n            >\r\n              <div className=\"relative pt-[66.67%]\">\r\n                <img\r\n                  src={img.url}\r\n                  alt={img.tags?.join(',') || 'Imagen del hotel'}\r\n                  className=\"absolute top-0 left-0 w-full h-full object-cover\"\r\n                />\r\n                {/* X solo al pasar el cursor */}\r\n                <button\r\n                  onClick={() => requestDelete(img.id, img.url)}\r\n                  className=\"absolute top-2 right-2 bg-white/90 text-red-600 rounded-full w-7 h-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-red-600 hover:text-white shadow\"\r\n                >\r\n                  ‚úï\r\n                </button>\r\n              </div>\r\n              <div className=\"p-3 bg-gray-50\">\r\n                <div className=\"flex flex-wrap gap-1 mb-2\">\r\n                  {img.tags?.map((tag: string) => (\r\n                    <span key={tag} className=\"bg-blue-50 text-blue-600 text-xs px-2 py-0.5 rounded\">\r\n                      {tag}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n                {img.quality_score && (\r\n                  <div className=\"text-xs text-gray-500\">\r\n                    Calidad: {(img.quality_score * 100).toFixed(0)}%\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* MODAL DE ELIMINACI√ìN */}\r\n      {showDeleteModal && (\r\n        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-2xl p-6 max-w-sm w-full mx-4 shadow-2xl border border-gray-200\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Eliminar imagen</h3>\r\n            <p className=\"text-sm text-gray-600 mb-4\">\r\n              ¬øEst√°s seguro de que quieres eliminar esta imagen?\r\n              <br />\r\n              <span className=\"text-red-600 font-semibold\">Esta acci√≥n no se puede deshacer.</span>\r\n            </p>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteModal(false);\r\n                  setImageToDelete(null);\r\n                }}\r\n                className=\"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                onClick={confirmDelete}\r\n                className=\"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 shadow-sm hover:shadow-md\"\r\n              >\r\n                Eliminar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div\r\n        onClick={() => (window.location.href = '/dashboard')}\r\n        className=\"px-4 py-3.5 rounded-lg cursor-pointer font-medium text-sm transition-all text-white/80 hover:bg-white/10 flex items-center gap-2 mt-8\"\r\n      >\r\n        <span className=\"text-lg\">‚Üê</span>\r\n        <span>Volver al Dashboard</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 762, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/app/hotel-media/page.tsx"],"sourcesContent":["// src/app/hotel-media/page.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"../../lib/supabaseClient\";\r\nimport { useNotifications } from \"../../hooks/useNotifications\";\r\nimport Gallery from \"@/components/Gallery\"; \r\n\r\ninterface Organization {\r\n  id: string;\r\n  name: string;\r\n  role: string;\r\n  address: string;\r\n  phone: string;\r\n  country: string;\r\n  province: string;\r\n  city: string;\r\n  website: string | null;\r\n  stars: number | null;\r\n  hotel_type: string | null;\r\n  profile_image: string | null;\r\n}\r\n\r\n// Componente NotificationsDropdown - VERSI√ìN COMPLETA SIN CHECK\r\ninterface Notification {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  date: string;\r\n  read?: boolean;\r\n}\r\n\r\ninterface NotificationsDropdownProps {\r\n  notifications: Notification[];\r\n  unreadCount: number;\r\n  loading: boolean;\r\n  markAsRead: (id: string) => void;\r\n  markAllAsRead: () => void;\r\n  deleteNotification: (id: string) => void;\r\n}\r\n\r\nconst NotificationsDropdown = ({ \r\n  notifications, \r\n  unreadCount, \r\n  loading, \r\n  markAsRead, \r\n  markAllAsRead, \r\n  deleteNotification \r\n}: NotificationsDropdownProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      const target = event.target as HTMLElement;\r\n      if (!target.closest('.notifications-dropdown')) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"notifications-dropdown relative\">\r\n      {/* Bot√≥n campana con efecto hover */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-gray-600 hover:text-blue-600 transition-all hover:-translate-y-0.5\"\r\n      >\r\n        {/* Bell Icon */}\r\n        <svg\r\n          className=\"w-6 h-6\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"1.8\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M14.857 17.657A2 2 0 0113 19H11a2 2 0 01-1.857-1.343M6 8a6 6 0 1112 0c0 3.5 1.5 5 2 5.5H4c.5-.5 2-2 2-5.5z\"\r\n          />\r\n        </svg>\r\n\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-semibold w-5 h-5 rounded-full flex items-center justify-center shadow\">\r\n            {unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-3 w-96 bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden z-50 animate-fade-in-down\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50\">\r\n            <h3 className=\"font-semibold text-gray-900\">Notificaciones</h3>\r\n\r\n            {unreadCount > 0 && (\r\n              <button\r\n                onClick={markAllAsRead}\r\n                className=\"text-xs font-medium text-blue-600 hover:text-blue-700 hover:underline\"\r\n              >\r\n                Marcar todo como le√≠do\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Loading */}\r\n          {loading && (\r\n            <div className=\"p-6 text-center text-gray-500 text-sm\">\r\n              <div className=\"w-6 h-6 mx-auto mb-2 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n              Cargando notificaciones...\r\n            </div>\r\n          )}\r\n\r\n          {/* Empty */}\r\n          {!loading && notifications.length === 0 && (\r\n            <div className=\"p-6 text-center text-gray-500 text-sm\">\r\n              <div className=\"text-5xl mb-3 opacity-30\">üîî</div>\r\n              No hay notificaciones\r\n            </div>\r\n          )}\r\n\r\n          {/* List - SIN ICONO DE CHECK */}\r\n          {!loading && notifications.length > 0 && (\r\n            <div className=\"max-h-96 overflow-y-auto divide-y divide-gray-100\">\r\n              {notifications.map((n) => (\r\n                <div\r\n                  key={n.id}\r\n                  className={`flex items-start gap-3 px-4 py-4 transition-all cursor-pointer ${\r\n                    !n.read ? \"bg-blue-50\" : \"hover:bg-gray-50\"\r\n                  }`}\r\n                  onClick={() => !n.read && markAsRead(n.id)}\r\n                >\r\n                  {/* Indicador de no le√≠do */}\r\n                  <div className=\"pt-1\">\r\n                    {!n.read && (\r\n                      <span className=\"block w-2 h-2 bg-blue-600 rounded-full animate-pulse\"></span>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Contenido */}\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-semibold text-gray-900\">\r\n                      {n.title}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-600 mt-1\">{n.message}</p>\r\n                    <p className=\"text-[11px] text-gray-400 mt-1\">{n.date}</p>\r\n                  </div>\r\n\r\n                  {/* SOLO BOT√ìN DE ELIMINAR */}\r\n                  <div className=\"flex items-start\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        deleteNotification(n.id);\r\n                      }}\r\n                      className=\"text-gray-400 hover:text-red-600 hover:scale-110 transition-transform\"\r\n                      title=\"Eliminar\"\r\n                    >\r\n                      {/* X Icon */}\r\n                      <svg\r\n                        className=\"w-4 h-4\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          d=\"M6 18L18 6M6 6l12 12\"\r\n                        />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst DeletePhotoModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  photoName,\r\n}: {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  photoName?: string;\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border border-gray-200\">\r\n        <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Confirmar eliminaci√≥n</h3>\r\n        <p className=\"text-gray-600 text-sm leading-relaxed mb-4\">\r\n          {photoName\r\n            ? `¬øEst√°s seguro de que quieres eliminar \"${photoName}\"?`\r\n            : \"¬øEst√°s seguro de que quieres eliminar esta foto?\"}\r\n          <br />\r\n          <span className=\"text-red-600 font-semibold\">Esta acci√≥n no se puede deshacer.</span>\r\n        </p>\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50\"\r\n          >\r\n            Cancelar\r\n          </button>\r\n\r\n          <button\r\n            onClick={onConfirm}\r\n            className=\"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 shadow-sm hover:shadow-md\"\r\n          >\r\n            Eliminar permanentemente\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function HotelMediaPage() {\r\n  const [org, setOrg] = useState<Organization | null>(null);\r\n  const [media, setMedia] = useState<{ url: string; type: string; id: string }[]>([]);\r\n  const [approvedHotels, setApprovedHotels] = useState<{ id: string; name: string }[]>([]);\r\n  const [expandedHotelId, setExpandedHotelId] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeSection, setActiveSection] = useState(\"gallery\");\r\n  const [totalMedia, setTotalMedia] = useState(0);\r\n  const [pendingRequests, setPendingRequests] = useState(0);\r\n  const [connectedAgencies, setConnectedAgencies] = useState(0);\r\n  const [totalHotels, setTotalHotels] = useState(0);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [photoToDelete, setPhotoToDelete] = useState<{ id: string; name?: string } | null>(null);\r\n\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    loading: notificationsLoading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n  } = useNotifications(userId);\r\n\r\n  useEffect(() => {\r\n    const loadOrg = async () => {\r\n      try {\r\n        const { data: sessionData } = await supabase.auth.getSession();\r\n        if (!sessionData?.session) {\r\n          window.location.href = \"/login\";\r\n          return;\r\n        }\r\n\r\n        const userId = sessionData.session.user.id;\r\n        setUserId(userId);\r\n\r\n        const { data: orgData } = await supabase\r\n          .from(\"organizations\")\r\n          .select(\"*\")\r\n          .eq(\"created_by\", userId)\r\n          .maybeSingle();\r\n\r\n        if (!orgData) {\r\n          window.location.href = \"/setup-organization\";\r\n          return;\r\n        }\r\n\r\n        setOrg(orgData as Organization);\r\n\r\n        if (orgData.role === \"hotel\") {\r\n          const { data: mediaData } = await supabase\r\n            .from(\"media\")\r\n            .select(\"id, url, type\")\r\n            .eq(\"hotel_id\", orgData.id)\r\n            .order(\"created_at\", { ascending: false });\r\n\r\n          setMedia(mediaData || []);\r\n          setTotalMedia(mediaData?.length || 0);\r\n\r\n          const { data: requestsData } = await supabase\r\n            .from(\"agency_hotel_access\")\r\n            .select(\"id\")\r\n            .eq(\"hotel_id\", orgData.id)\r\n            .eq(\"status\", \"pending\");\r\n\r\n          setPendingRequests(requestsData?.length || 0);\r\n\r\n          const { data: connectedData } = await supabase\r\n            .from(\"agency_hotel_access\")\r\n            .select(\"id\")\r\n            .eq(\"hotel_id\", orgData.id)\r\n            .eq(\"status\", \"approved\");\r\n\r\n          setConnectedAgencies(connectedData?.length || 0);\r\n        }\r\n\r\n        if (orgData.role === \"agency\") {\r\n          const { data: accessData } = await supabase\r\n            .from(\"agency_hotel_access\")\r\n            .select(\"hotel_id, status\")\r\n            .eq(\"agency_id\", orgData.id);\r\n\r\n          if (accessData && Array.isArray(accessData)) {\r\n            const approved = accessData.filter((a) => a.status === \"approved\");\r\n            const pending = accessData.filter((a) => a.status === \"pending\");\r\n\r\n            setTotalHotels(approved.length);\r\n            setPendingRequests(pending.length);\r\n\r\n            const hotelIds = approved.map((a) => a.hotel_id);\r\n\r\n            const { data: hotelsData } = await supabase\r\n              .from(\"organizations\")\r\n              .select(\"id, name\")\r\n              .in(\"id\", hotelIds);\r\n\r\n            setApprovedHotels(hotelsData || []);\r\n          }\r\n        }\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Error loading data:\", err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadOrg();\r\n  }, []);\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut();\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  const handleDeletePhoto = async () => {\r\n    if (!photoToDelete) return;\r\n\r\n    try {\r\n      const photo = media.find((m) => m.id === photoToDelete.id);\r\n      if (!photo) throw new Error(\"Foto no encontrada\");\r\n\r\n      const fileName = photo.url.split(\"/\").pop();\r\n\r\n      await supabase.storage.from(\"media\").remove([fileName!]);\r\n      await supabase.from(\"media\").delete().eq(\"id\", photoToDelete.id);\r\n\r\n      setMedia((prev) => prev.filter((p) => p.id !== photoToDelete.id));\r\n      setTotalMedia((prev) => prev - 1);\r\n\r\n      setShowDeleteModal(false);\r\n      setPhotoToDelete(null);\r\n    } catch (err) {\r\n      console.error(\"Error al eliminar foto:\", err);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex justify-center items-center bg-white\">\r\n        <div className=\"p-8 bg-white rounded-xl shadow-sm text-center\">\r\n          <div className=\"w-8 h-8 mx-auto mb-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          <p className=\"text-gray-600 text-base\">Cargando...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!org) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex bg-gray-50 font-sans\">\r\n\r\n      {/* SIDEBAR LIMPIO */}\r\n      <aside className=\"w-72 bg-gradient-to-b from-blue-800 to-blue-900 text-white p-6 fixed left-0 top-0 h-screen flex flex-col\">\r\n\r\n        {/* T√≠tulo */}\r\n        <div className=\"flex items-center mb-8 pb-3 border-b border-white/10\">\r\n          <h1 className=\"text-xl font-bold tracking-tight\">Hotel Media Bank</h1>\r\n        </div>\r\n\r\n        {/* Volver */}\r\n        <nav className=\"flex-1 flex flex-col gap-2\">\r\n          <div\r\n            onClick={() => (window.location.href = \"/dashboard\")}\r\n            className=\"px-4 py-3.5 rounded-lg cursor-pointer font-medium text-sm transition-all text-white/80 hover:bg-white/10 flex items-center gap-2\"\r\n          >\r\n            <span className=\"text-lg\">‚Üê</span>\r\n            <span>Volver al Dashboard</span>\r\n          </div>\r\n        </nav>\r\n\r\n        {/* Logout */}\r\n        <div className=\"mt-auto pt-5 border-t border-white/10\">\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center justify-center gap-2 py-0.5 text-blue-200/90 hover:text-white transition-colors text-sm font-medium\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\r\n            </svg>\r\n            Cerrar Sesi√≥n\r\n          </button>\r\n        </div>\r\n\r\n      </aside>\r\n      {/* MAIN CONTENT */}\r\n      <main className=\"flex-1 ml-72 bg-gray-50 p-8 overflow-y-auto\">\r\n\r\n        {/* TOP BAR */}\r\n        <div className=\"fixed top-0 left-72 right-0 h-16 bg-white shadow-sm flex items-center justify-between px-8 z-40\">\r\n          <span className=\"text-sm text-gray-500 uppercase font-semibold\">\r\n            {activeSection === \"gallery\" ? \"Dashboard\" : activeSection}\r\n          </span>\r\n\r\n          <NotificationsDropdown\r\n            notifications={notifications}\r\n            unreadCount={unreadCount}\r\n            loading={notificationsLoading}\r\n            markAsRead={markAsRead}\r\n            markAllAsRead={markAllAsRead}\r\n            deleteNotification={deleteNotification}\r\n          />\r\n        </div>\r\n\r\n        {/* CONTENT */}\r\n        <div className=\"pt-24\">\r\n          <div className=\"mb-8\">\r\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n              {org.role === \"hotel\" ? \"Mi Galer√≠a\" : \"Hoteles Disponibles\"}\r\n            </h2>\r\n            <p className=\"text-gray-600 text-base\">\r\n              {org.role === \"hotel\"\r\n                ? \"Gestiona y comparte tu contenido multimedia con agencias autorizadas\"\r\n                : \"Accede al contenido multimedia de tus hoteles asociados\"}\r\n            </p>\r\n          </div>\r\n\r\n          {/* GALER√çA DEL HOTEL */}\r\n          {org.role === \"hotel\" && (\r\n            <div className=\"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden\">\r\n              <div className=\"p-8\">\r\n                <Gallery key={media.length} />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* GALER√çAS PARA AGENCIAS */}\r\n          {org.role === \"agency\" && (\r\n            <div className=\"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden\">\r\n              <div className=\"p-8\">\r\n                {/* Aqu√≠ va tu c√≥digo de agencias */}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* MODAL DE ELIMINACI√ìN */}\r\n        <DeletePhotoModal\r\n          isOpen={showDeleteModal}\r\n          onClose={() => {\r\n            setShowDeleteModal(false);\r\n            setPhotoToDelete(null);\r\n          }}\r\n          onConfirm={handleDeletePhoto}\r\n          photoName={photoToDelete?.name}\r\n        />\r\n      </main>\r\n\r\n      {/* Estilos globales para animaciones */}\r\n      <style jsx global>{`\r\n        @keyframes fade-in-down {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(-10px);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0);\r\n          }\r\n        }\r\n        .animate-fade-in-down {\r\n          animation: fade-in-down 0.2s ease-out;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}