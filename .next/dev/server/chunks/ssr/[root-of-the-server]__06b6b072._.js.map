{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/lib/supabaseClient.ts"],"sourcesContent":["// src/lib/supabaseClient.ts\r\n\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\n// ------------------------------------------------------------\r\n// ‚≠ê Validaci√≥n estricta de variables de entorno\r\n// ------------------------------------------------------------\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (\r\n  !supabaseUrl ||\r\n  !supabaseAnonKey ||\r\n  supabaseUrl === \"undefined\" ||\r\n  supabaseAnonKey === \"undefined\" ||\r\n  supabaseUrl === \"null\" ||\r\n  supabaseAnonKey === \"null\"\r\n) {\r\n  throw new Error(\r\n    \"‚ùå Supabase environment variables are missing or invalid. Check NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\r\n  );\r\n}\r\n\r\n// ------------------------------------------------------------\r\n// ‚≠ê Crear cliente Supabase (modo frontend con sesi√≥n persistente)\r\n// ------------------------------------------------------------\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    persistSession: true,        // ‚Üê NECESARIO para login\r\n    autoRefreshToken: true,      // ‚Üê refresca tokens autom√°ticamente\r\n    detectSessionInUrl: true,    // ‚Üê necesario para magic links / OAuth\r\n  },\r\n});\r\n\r\n// ------------------------------------------------------------\r\n// (Opcional) Log controlado solo en desarrollo\r\n// ------------------------------------------------------------\r\nif (process.env.NODE_ENV === \"development\") {\r\n  console.log(\"üîå Supabase client initialized\");\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,4BAA4B;AAE5B;;AAEA,+DAA+D;AAC/D,gDAAgD;AAChD,+DAA+D;AAC/D,MAAM;AACN,MAAM;AAEN;;AAgBO,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEA,+DAA+D;AAC/D,+CAA+C;AAC/C,+DAA+D;AAC/D,wCAA4C;IAC1C,QAAQ,GAAG,CAAC;AACd"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/hooks/useNotifications.ts"],"sourcesContent":["import { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { supabase } from '../lib/supabaseClient';\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  user_id: string;\r\n  organization_id: string;\r\n  type: string;\r\n  title: string;\r\n  message: string;\r\n  data: any;\r\n  is_read: boolean;\r\n  created_at: string;\r\n  related_id?: string;\r\n  date?: string;\r\n}\r\n\r\nexport function useNotifications(userId: string | null) {\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  // ‚úÖ useRef para evitar dependencias inestables en el efecto\r\n  const notificationsRef = useRef<Notification[]>([]);\r\n  notificationsRef.current = notifications;\r\n\r\n  const loadNotifications = useCallback(async () => {\r\n    if (!userId) {\r\n      setNotifications([]);\r\n      setUnreadCount(0);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('notifications')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .order('created_at', { ascending: false })\r\n        .limit(20);\r\n\r\n      if (error) throw error;\r\n\r\n      const notificationsClean = (data || []).map((n: any) => ({\r\n        ...n,\r\n        date: undefined\r\n      }));\r\n\r\n      setNotifications(notificationsClean);\r\n      setUnreadCount(notificationsClean.filter((n: Notification) => !n.is_read).length);\r\n    } catch (error) {\r\n      console.error('Error loading notifications:', error);\r\n      setNotifications([]);\r\n      setUnreadCount(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [userId]);\r\n\r\n  const markAsRead = useCallback(async (notificationId: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .update({ is_read: true })\r\n        .eq('id', notificationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev =>\r\n        prev.map(n => (n.id === notificationId ? { ...n, is_read: true } : n))\r\n      );\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    } catch (error) {\r\n      console.error('Error marking notification as read:', error);\r\n    }\r\n  }, []);\r\n\r\n  const markAllAsRead = useCallback(async () => {\r\n    if (!userId) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .update({ is_read: true })\r\n        .eq('user_id', userId)\r\n        .eq('is_read', false);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev => prev.map(n => ({ ...n, is_read: true })));\r\n      setUnreadCount(0);\r\n    } catch (error) {\r\n      console.error('Error marking all notifications as read:', error);\r\n    }\r\n  }, [userId]);\r\n\r\n  const deleteNotification = useCallback(async (notificationId: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .delete()\r\n        .eq('id', notificationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev => prev.filter(n => n.id !== notificationId));\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    } catch (error) {\r\n      console.error('Error deleting notification:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // ‚úÖ Cargar notificaciones al montar y cuando userId cambia\r\n    loadNotifications();\r\n\r\n    // ‚úÖ Salir si no hay userId v√°lido\r\n    if (!userId) {\r\n      return;\r\n    }\r\n\r\n    // ‚úÖ Configurar canal de tiempo real SIN depender del estado notifications\r\n    const channel = supabase\r\n      .channel(`notifications:${userId}`)\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'notifications',\r\n          filter: `user_id=eq.${userId}`\r\n        },\r\n        (payload) => {\r\n          console.log('Realtime event:', payload.eventType, payload);\r\n\r\n          if (payload.eventType === 'INSERT') {\r\n            const newNotification = {\r\n              ...(payload.new as any),\r\n              date: undefined\r\n            };\r\n            setNotifications(prev => [newNotification as Notification, ...prev]);\r\n            \r\n            if (!(payload.new as any).is_read) {\r\n              setUnreadCount(prev => prev + 1);\r\n            }\r\n          }\r\n          else if (payload.eventType === 'UPDATE') {\r\n            const newNotification = {\r\n              ...(payload.new as any),\r\n              date: undefined\r\n            } as Notification;\r\n\r\n            setNotifications(prev =>\r\n              prev.map(n => (n.id === newNotification.id ? { ...n, ...newNotification } : n))\r\n            );\r\n\r\n            // ‚úÖ USAR payload.old y payload.new DIRECTAMENTE (sin depender del estado)\r\n            const oldIsRead = (payload.old as any).is_read;\r\n            const newIsRead = (payload.new as any).is_read;\r\n            \r\n            if (oldIsRead !== newIsRead) {\r\n              if (newIsRead) {\r\n                setUnreadCount(prev => Math.max(0, prev - 1));\r\n              } else {\r\n                setUnreadCount(prev => prev + 1);\r\n              }\r\n            }\r\n          }\r\n          else if (payload.eventType === 'DELETE') {\r\n            const deletedNotification = payload.old as Notification;\r\n            setNotifications(prev => prev.filter(n => n.id !== deletedNotification.id));\r\n            \r\n            // ‚úÖ USAR payload.old DIRECTAMENTE para verificar is_read\r\n            if (!(payload.old as any).is_read) {\r\n              setUnreadCount(prev => Math.max(0, prev - 1));\r\n            }\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    // ‚úÖ Limpieza del canal al desmontar o cambiar userId\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [userId, loadNotifications]); // ‚úÖ SOLO estas dos dependencias estables\r\n\r\n  return {\r\n    notifications,\r\n    unreadCount,\r\n    loading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n    reload: loadNotifications\r\n  };\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/app/dashboard/VisualImpactGallery.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo } from \"react\";\r\n\r\ninterface MediaItem {\r\n  id: string;\r\n  url: string;\r\n  created_at: string;\r\n  ai_title?: string;\r\n}\r\n\r\ninterface Props {\r\n  media: MediaItem[];\r\n}\r\n\r\n/**\r\n * Posiciones cuidadosamente dise√±adas para:\r\n * - evitar solapamientos\r\n * - mantener densidad visual\r\n * - romper patrones verticales\r\n */\r\nconst POSITIONS = [\r\n  { x: 42, y: 34 },\r\n  { x: 58, y: 28 },\r\n  { x: 26, y: 32 },\r\n  { x: 72, y: 36 },\r\n  { x: 34, y: 52 },\r\n  { x: 52, y: 50 },\r\n  { x: 68, y: 54 },\r\n  { x: 30, y: 72 },\r\n  { x: 48, y: 74 },\r\n  { x: 66, y: 70 },\r\n];\r\n\r\n/**\r\n * Tama√±os mezclados para evitar lectura jer√°rquica evidente\r\n */\r\nconst SIZES = [\r\n  165,\r\n  140,\r\n  190,\r\n  115,\r\n  140,\r\n  190,\r\n  115,\r\n  165,\r\n  140,\r\n  115,\r\n];\r\n\r\nexport default function VisualImpactGallery({ media }: Props) {\r\n  const bubbles = useMemo(() => {\r\n    return [...media]\r\n      .filter(m => m.url)\r\n      .sort(\r\n        (a, b) =>\r\n          new Date(b.created_at).getTime() -\r\n          new Date(a.created_at).getTime()\r\n      )\r\n      .slice(0, 10)\r\n      .map((item, index) => ({\r\n        ...item,\r\n        size: SIZES[index],\r\n        position: POSITIONS[index],\r\n        animation:\r\n          SIZES[index] >= 180\r\n            ? \"bubbleFloatLarge 26s ease-in-out infinite\"\r\n            : SIZES[index] >= 150\r\n            ? \"bubbleFloatMedium 30s ease-in-out infinite\"\r\n            : \"bubbleFloatSlow 34s ease-in-out infinite\",\r\n      }));\r\n  }, [media]);\r\n\r\n  return (\r\n    <div className=\"relative w-full h-[600px] overflow-hidden\">\r\n      <p className=\"absolute top-0 left-0 text-sm font-medium text-gray-600\">\r\n        √öltimo contenido a√±adido\r\n      </p>\r\n\r\n      {bubbles.map(item => (\r\n        <div\r\n          key={item.id}\r\n          className=\"absolute rounded-full overflow-hidden shadow-lg transition-transform hover:scale-105\"\r\n          style={{\r\n            width: item.size,\r\n            height: item.size,\r\n            left: `${item.position.x}%`,\r\n            top: `${item.position.y}%`,\r\n            transform: \"translate(-50%, -50%)\",\r\n            animation: item.animation,\r\n          }}\r\n          title={item.ai_title ?? \"Imagen del hotel\"}\r\n        >\r\n          <img\r\n            src={item.url}\r\n            alt={item.ai_title ?? \"Imagen del hotel\"}\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAeA;;;;;CAKC,GACD,MAAM,YAAY;IAChB;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;IACf;QAAE,GAAG;QAAI,GAAG;IAAG;CAChB;AAED;;CAEC,GACD,MAAM,QAAQ;IACZ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEc,SAAS,oBAAoB,EAAE,KAAK,EAAS;IAC1D,MAAM,UAAU,IAAA,gNAAO,EAAC;QACtB,OAAO;eAAI;SAAM,CACd,MAAM,CAAC,CAAA,IAAK,EAAE,GAAG,EACjB,IAAI,CACH,CAAC,GAAG,IACF,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,KAC9B,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,IAEjC,KAAK,CAAC,GAAG,IACT,GAAG,CAAC,CAAC,MAAM,QAAU,CAAC;gBACrB,GAAG,IAAI;gBACP,MAAM,KAAK,CAAC,MAAM;gBAClB,UAAU,SAAS,CAAC,MAAM;gBAC1B,WACE,KAAK,CAAC,MAAM,IAAI,MACZ,8CACA,KAAK,CAAC,MAAM,IAAI,MAChB,+CACA;YACR,CAAC;IACL,GAAG;QAAC;KAAM;IAEV,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAE,WAAU;0BAA0D;;;;;;YAItE,QAAQ,GAAG,CAAC,CAAA,qBACX,8OAAC;oBAEC,WAAU;oBACV,OAAO;wBACL,OAAO,KAAK,IAAI;wBAChB,QAAQ,KAAK,IAAI;wBACjB,MAAM,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC3B,KAAK,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC1B,WAAW;wBACX,WAAW,KAAK,SAAS;oBAC3B;oBACA,OAAO,KAAK,QAAQ,IAAI;8BAExB,cAAA,8OAAC;wBACC,KAAK,KAAK,GAAG;wBACb,KAAK,KAAK,QAAQ,IAAI;wBACtB,WAAU;;;;;;mBAfP,KAAK,EAAE;;;;;;;;;;;AAqBtB"}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useRef, useMemo } from \"react\";\r\nimport { supabase } from \"../../lib/supabaseClient\";\r\nimport { useNotifications } from \"../../hooks/useNotifications\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport VisualImpactGallery from \"./VisualImpactGallery\";\r\n\r\n/* =======================\r\n   TYPES\r\n======================= */\r\n\r\ninterface Organization {\r\n  id: string;\r\n  name: string;\r\n  role: \"hotel\" | \"agency\";\r\n  address: string;\r\n  phone: string;\r\n  country: string;\r\n  province: string;\r\n  city: string;\r\n  website: string | null;\r\n  stars: number | null;\r\n  hotel_type: string | null;\r\n  profile_image: string | null;\r\n}\r\n\r\ninterface MediaItem {\r\n  id: string;\r\n  url: string;\r\n  type: \"image\" | \"video\";\r\n  tags?: string[];\r\n  category?: string;\r\n  quality_score?: number;\r\n  created_at: string;\r\n  versions?: any;\r\n  ai_title?: string;\r\n}\r\n\r\ninterface Notification {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  date: string;\r\n  read?: boolean;\r\n}\r\n\r\ninterface NotificationsDropdownProps {\r\n  notifications: Notification[];\r\n  unreadCount: number;\r\n  loading: boolean;\r\n  markAsRead: (id: string) => void;\r\n  markAllAsRead: () => void;\r\n  deleteNotification: (id: string) => void;\r\n}\r\n\r\n/* =======================\r\n   NOTIFICATIONS DROPDOWN\r\n======================= */\r\n\r\nconst NotificationsDropdown = ({\r\n  notifications,\r\n  unreadCount,\r\n  loading,\r\n  markAsRead,\r\n  markAllAsRead,\r\n  deleteNotification,\r\n}: NotificationsDropdownProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      const target = event.target as HTMLElement;\r\n      if (!target.closest(\".notifications-dropdown\")) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"notifications-dropdown relative\">\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 rounded-lg text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition\"\r\n        type=\"button\"\r\n      >\r\n        <svg\r\n          className=\"w-6 h-6\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"1.8\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0a3 3 0 01-6 0\"\r\n          />\r\n        </svg>\r\n\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-semibold w-5 h-5 rounded-full flex items-center justify-center\">\r\n            {unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-3 w-96 bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden z-50 animate-fade-in-down\">\r\n          <div className=\"flex items-center justify-between px-4 py-3 border-b bg-gray-50\">\r\n            <h3 className=\"font-semibold text-gray-900\">Notificaciones</h3>\r\n            {unreadCount > 0 && (\r\n              <button\r\n                onClick={markAllAsRead}\r\n                className=\"text-xs font-medium text-blue-600 hover:underline\"\r\n                type=\"button\"\r\n              >\r\n                Marcar todo como le√≠do\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {loading && (\r\n            <div className=\"p-6 text-center text-gray-500 text-sm\">\r\n              <div className=\"w-6 h-6 mx-auto mb-2 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n              Cargando notificaciones...\r\n            </div>\r\n          )}\r\n\r\n          {!loading && notifications.length === 0 && (\r\n            <div className=\"p-6 text-center text-gray-500 text-sm\">\r\n              No hay notificaciones\r\n            </div>\r\n          )}\r\n\r\n          {!loading && notifications.length > 0 && (\r\n            <div className=\"max-h-96 overflow-y-auto divide-y divide-gray-100\">\r\n              {notifications.map((n) => (\r\n                <div\r\n                  key={n.id}\r\n                  onClick={() => !n.read && markAsRead(n.id)}\r\n                  className={`flex items-start gap-3 px-4 py-4 cursor-pointer ${\r\n                    !n.read ? \"bg-blue-50\" : \"hover:bg-gray-50\"\r\n                  }`}\r\n                >\r\n                  <div className=\"pt-1\">\r\n                    {!n.read && (\r\n                      <span className=\"block w-2 h-2 bg-blue-600 rounded-full\"></span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-semibold text-gray-900\">\r\n                      {n.title}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-600 mt-1\">{n.message}</p>\r\n                    <p className=\"text-[11px] text-gray-400 mt-1\">{n.date}</p>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      deleteNotification(n.id);\r\n                    }}\r\n                    className=\"text-gray-400 hover:text-red-600 transition\"\r\n                    type=\"button\"\r\n                  >\r\n                    ‚úï\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function Dashboard() {\r\n  const router = useRouter();\r\n  const mainContentRef = useRef<HTMLDivElement>(null);\r\n\r\n  const [org, setOrg] = useState<Organization | null>(null);\r\n  const [media, setMedia] = useState<MediaItem[]>([]);\r\n  const [approvedHotels, setApprovedHotels] = useState<{ id: string; name: string }[]>([]);\r\n  const [expandedHotelId, setExpandedHotelId] = useState<string | null>(null);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeSection, setActiveSection] = useState<\"gallery\" | \"requests\" | \"profile\">(\"gallery\");\r\n\r\n  const [totalMedia, setTotalMedia] = useState(0);\r\n  const [pendingRequests, setPendingRequests] = useState(0);\r\n  const [connectedAgencies, setConnectedAgencies] = useState(0);\r\n  const [totalHotels, setTotalHotels] = useState(0);\r\n\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\r\n  \r\n  const [selectedImage, setSelectedImage] = useState<MediaItem | null>(null);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [imageToDelete, setImageToDelete] = useState<{ id: string; url: string } | null>(null);\r\n  const [hoveredCard, setHoveredCard] = useState<string | null>(null);\r\n\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    loading: notificationsLoading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n  } = useNotifications(userId);\r\n\r\n  /* =======================\r\n     HELPERS\r\n  ======================= */\r\n  \r\n  const normalizeDashboardTags = (raw: any): string[] => { \r\n    if (!raw) return []; \r\n    if (typeof raw === 'string') { \r\n      try { \r\n        return normalizeDashboardTags(JSON.parse(raw)); \r\n      } catch { \r\n        return []; \r\n      } \r\n    } \r\n    if (Array.isArray(raw)) { \r\n      return raw \r\n        .map(t => { \r\n          if (typeof t === 'string') { \r\n            try { \r\n              const parsed = JSON.parse(t); \r\n              return parsed?.label ?? t; \r\n            } catch { \r\n              return t; \r\n            } \r\n          } \r\n          if (typeof t === 'object') { \r\n            return t.label ?? t.tag ?? null; \r\n          } \r\n          return null; \r\n        }) \r\n        .filter(Boolean) \r\n        .map(t => String(t).toLowerCase()); \r\n    } \r\n    return []; \r\n  };\r\n\r\n  const parseMediaVersions = (mediaData: any[]) => {\r\n    return mediaData.map(item => ({\r\n      ...item,\r\n      versions: item.versions && typeof item.versions === 'string' \r\n        ? JSON.parse(item.versions) \r\n        : item.versions\r\n    }));\r\n  };\r\n\r\n  const handleDownload = async (url: string, filename: string) => {\r\n    try {\r\n      const response = await fetch(url);\r\n      const blob = await response.blob();\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = blobUrl;\r\n      a.download = filename;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(blobUrl);\r\n    } catch (error) {\r\n      console.error('Error al descargar la imagen:', error);\r\n      alert('Error al descargar la imagen. Int√©ntalo de nuevo.');\r\n    }\r\n  };\r\n\r\n  // ‚úÖ FUNCI√ìN ACTUALIZADA CON ICONOS, SIN SCROLL Y 100% EN ESPA√ëOL\r\n  const renderDownloadTable = (versions: any) => {\r\n    if (!versions) return null;\r\n    \r\n    const originalDimensions = versions.original?.dimensions;\r\n    let originalWidth = 0;\r\n    let originalHeight = 0;\r\n\r\n    if (originalDimensions) {\r\n      const [w, h] = originalDimensions.split('x').map(Number);\r\n      originalWidth = w;\r\n      originalHeight = h;\r\n    }\r\n\r\n    const validVersions = Object.entries(versions)\r\n      .filter(([size, details]: [string, any]) => {\r\n        if (size === 'original') return true;\r\n        if (!details?.dimensions) return false;\r\n        const [w, h] = details.dimensions.split('x').map(Number);\r\n        return w <= originalWidth && h <= originalHeight;\r\n      })\r\n      .sort((a, b) => {\r\n        const order = ['thumbnail', 'small', 'medium', 'large', 'original'];\r\n        return order.indexOf(a[0]) - order.indexOf(b[0]);\r\n      });\r\n\r\n    return (\r\n      <div className=\"mt-6\">\r\n        <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Opciones de descarga</h4>\r\n        <div className=\"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200 table-fixed\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4\">\r\n                    Descripci√≥n\r\n                  </th>\r\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4\">\r\n                    Dimensiones\r\n                  </th>\r\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4\">\r\n                    Relaci√≥n\r\n                  </th>\r\n                  <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4\">\r\n                    Acciones\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {validVersions.map(([size, details]: [string, any]) => (\r\n                  <tr key={size} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 truncate\">\r\n                      {size === 'thumbnail' ? 'Miniatura' : \r\n                       size === 'small' ? 'Peque√±o' : \r\n                       size === 'medium' ? 'Mediano' : \r\n                       size === 'large' ? 'Grande' : 'Original'}\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500 truncate\">\r\n                      {details.dimensions}\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500 truncate\">\r\n                      {details.aspect_ratio}\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                      <div className=\"flex justify-end gap-2\">\r\n                        {/* ‚úÖ BOT√ìN DE DESCARGA CON ICONO ELEGANTE */}\r\n                        <button\r\n                          onClick={() =>\r\n                            handleDownload(details.url, `${size}-${Date.now()}.jpg`)\r\n                          }\r\n                          className=\"inline-flex items-center justify-center w-9 h-9 rounded-lg text-blue-600 bg-blue-50 hover:bg-blue-100 transition-colors shadow-sm hover:shadow-md\"\r\n                          title=\"Descargar\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\r\n                          </svg>\r\n                        </button>\r\n                        \r\n                        {/* ‚úÖ BOT√ìN DE VER CON ICONO ELEGANTE */}\r\n                        <a\r\n                          href={details.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"inline-flex items-center justify-center w-9 h-9 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors shadow-sm hover:shadow\"\r\n                          title=\"Ver imagen\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\r\n                          </svg>\r\n                        </a>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /* =======================\r\n     LOAD INITIAL DATA\r\n  ======================= */\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    \r\n    const loadOrgAndData = async () => {\r\n      try {\r\n        const { data: sessionData } = await supabase.auth.getSession();\r\n\r\n        if (!sessionData?.session) {\r\n          router.push(\"/login\");\r\n          return;\r\n        }\r\n\r\n        const uid = sessionData.session.user.id;\r\n        if (isMounted) setUserId(uid);\r\n\r\n        const { data: orgData } = await supabase\r\n          .from(\"organizations\")\r\n          .select(\"*\")\r\n          .eq(\"created_by\", uid)\r\n          .maybeSingle();\r\n\r\n        if (!orgData) {\r\n          router.push(\"/setup-organization\");\r\n          return;\r\n        }\r\n\r\n        if (isMounted) setOrg(orgData as Organization);\r\n\r\n        if (orgData.role === \"hotel\") {\r\n          const { data: mediaData } = await supabase\r\n            .from(\"media\")\r\n            .select(\"id, url, type, tags, category, quality_score, created_at, versions, ai_title\")\r\n            .eq(\"hotel_id\", orgData.id)\r\n            .order(\"created_at\", { ascending: false });\r\n\r\n          const parsedMedia = parseMediaVersions(mediaData || []);\r\n\r\n          if (isMounted) {\r\n            setMedia(parsedMedia);\r\n            setTotalMedia(parsedMedia.length || 0);\r\n          }\r\n\r\n          const { data: requestsData } = await supabase\r\n            .from(\"agency_hotel_access\")\r\n            .select(\"id\")\r\n            .eq(\"hotel_id\", orgData.id)\r\n            .eq(\"status\", \"pending\");\r\n\r\n          if (isMounted) setPendingRequests(requestsData?.length || 0);\r\n\r\n          const { data: connectedData } = await supabase\r\n            .from(\"agency_hotel_access\")\r\n            .select(\"id\")\r\n            .eq(\"hotel_id\", orgData.id)\r\n            .eq(\"status\", \"approved\");\r\n\r\n          if (isMounted) setConnectedAgencies(connectedData?.length || 0);\r\n        }\r\n\r\n        if (orgData.role === \"agency\") {\r\n          const { data: accessData } = await supabase\r\n            .from(\"agency_hotel_access\")\r\n            .select(\"hotel_id, status\")\r\n            .eq(\"agency_id\", orgData.id);\r\n\r\n          if (accessData && Array.isArray(accessData) && isMounted) {\r\n            const approved = accessData.filter((a) => a.status === \"approved\");\r\n            const pending = accessData.filter((a) => a.status === \"pending\");\r\n\r\n            setTotalHotels(approved.length);\r\n            setPendingRequests(pending.length);\r\n\r\n            const hotelIds = approved.map((a) => a.hotel_id);\r\n\r\n            if (hotelIds.length > 0) {\r\n              const { data: hotelsData } = await supabase\r\n                .from(\"organizations\")\r\n                .select(\"id, name\")\r\n                .in(\"id\", hotelIds);\r\n\r\n              if (isMounted) setApprovedHotels(hotelsData || []);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (isMounted) setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Error loading dashboard:\", err);\r\n        if (isMounted) setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadOrgAndData();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [router]);\r\n\r\n  /* =======================\r\n     FILTER & SORT\r\n  ======================= */\r\n\r\n  const filteredMedia =\r\n    selectedCategory === \"all\"\r\n      ? media\r\n      : media.filter((m) => m.category === selectedCategory);\r\n\r\n  const sortedByDateMedia = useMemo(() => {\r\n    return [...filteredMedia].sort((a, b) => {\r\n      const dateA = new Date(a.created_at).getTime();\r\n      const dateB = new Date(b.created_at).getTime();\r\n      return dateB - dateA;\r\n    });\r\n  }, [filteredMedia]);\r\n\r\n  /* =======================\r\n     HELPERS\r\n  ======================= */\r\n\r\n  const toggleHotelGallery = (hotelId: string) => {\r\n    if (expandedHotelId === hotelId) {\r\n      setExpandedHotelId(null);\r\n      setMedia([]);\r\n    } else {\r\n      setExpandedHotelId(hotelId);\r\n      supabase\r\n        .from(\"media\")\r\n        .select(\"id, url, type, tags, category, quality_score, created_at, versions, ai_title\")\r\n        .eq(\"hotel_id\", hotelId)\r\n        .order(\"created_at\", { ascending: false })\r\n        .then(({ data }) => {\r\n          if (data) {\r\n            const parsedMedia = parseMediaVersions(data as MediaItem[]);\r\n            setMedia(parsedMedia);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut();\r\n    router.push(\"/\");\r\n  };\r\n\r\n  const resetDashboardView = () => {\r\n    setActiveSection(\"gallery\");\r\n    setSelectedCategory(\"all\");\r\n    setExpandedHotelId(null);\r\n    if (org?.role === \"agency\") {\r\n      setMedia([]);\r\n    }\r\n    mainContentRef.current?.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex justify-center items-center bg-white\">\r\n        <div className=\"p-8 bg-white rounded-xl shadow-sm text-center\">\r\n          <div className=\"w-8 h-8 mx-auto mb-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          <p className=\"text-gray-600 text-base\">Cargando...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!org) return null;\r\n  \r\n  const profileImage = org.profile_image\r\n    ? org.profile_image\r\n    : org.role === \"hotel\"\r\n    ? `https://ui-avatars.com/api/?name=${encodeURIComponent(org.name)}&background=3b82f6&color=ffffff`\r\n    : `https://ui-avatars.com/api/?name=${encodeURIComponent(org.name)}&background=10b981&color=ffffff`;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex bg-gray-50 font-sans\">\r\n      <aside className=\"w-72 bg-gradient-to-b from-blue-800 to-blue-900 text-white p-6 fixed left-0 top-0 h-screen flex flex-col\">\r\n        <div className=\"flex items-center mb-8 pb-4 border-b border-white/10\">\r\n          <h1 className=\"text-xl font-bold tracking-tight\">Hotel Media Bank</h1>\r\n        </div>\r\n\r\n        <div className=\"bg-blue-100 rounded-xl p-4 mb-8 shadow-sm\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"w-14 h-14 rounded-full overflow-hidden flex-shrink-0\">\r\n              <img\r\n                src={profileImage}\r\n                alt={org.name}\r\n                className=\"w-full h-full object-cover\"\r\n                onError={(e) => {\r\n                  e.currentTarget.src = org.role === \"hotel\"\r\n                    ? `https://ui-avatars.com/api/?name=Hotel&background=3b82f6&color=ffffff`\r\n                    : `https://ui-avatars.com/api/?name=Agencia&background=10b981&color=ffffff`;\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <h3 className=\"text-sm font-semibold text-blue-900 truncate mb-1\">\r\n                {org.name}\r\n              </h3>\r\n              <p className=\"text-xs text-gray-600 capitalize\">\r\n                {org.role === \"hotel\" ? \"Hotel\" : \"Agencia de viajes\"}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <nav className=\"flex-1 flex flex-col gap-2\">\r\n          <div\r\n            onClick={resetDashboardView}\r\n            className={`relative px-4 py-3.5 rounded-xl cursor-pointer font-medium text-sm transition-all ${\r\n              activeSection === \"gallery\"\r\n                ? \"bg-white/15 text-white\"\r\n                : \"text-white/80 hover:bg-white/10\"\r\n            }`}\r\n          >\r\n            {activeSection === \"gallery\" && (\r\n              <span className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r\"></span>\r\n            )}\r\n            Dashboard\r\n          </div>\r\n\r\n          {org.role === \"hotel\" && (\r\n            <div\r\n              onClick={() => {\r\n                setActiveSection(\"requests\");\r\n                router.push(\"/hotel-requests\");\r\n              }}\r\n              className={`relative px-4 py-3.5 rounded-xl cursor-pointer font-medium text-sm transition-all ${\r\n                activeSection === \"requests\"\r\n                  ? \"bg-white/15 text-white\"\r\n                  : \"text-white/80 hover:bg-white/10\"\r\n              }`}\r\n            >\r\n              {activeSection === \"requests\" && (\r\n                <span className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r\"></span>\r\n              )}\r\n              Solicitudes\r\n            </div>\r\n          )}\r\n\r\n          {org.role === \"agency\" && (\r\n            <div\r\n              onClick={() => {\r\n                setActiveSection(\"requests\");\r\n                router.push(\"/agency-requests\");\r\n              }}\r\n              className={`relative px-4 py-3.5 rounded-xl cursor-pointer font-medium text-sm transition-all ${\r\n                activeSection === \"requests\"\r\n                  ? \"bg-white/15 text-white\"\r\n                  : \"text-white/80 hover:bg-white/10\"\r\n              }`}\r\n            >\r\n              {activeSection === \"requests\" && (\r\n                <span className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-white rounded-r\"></span>\r\n              )}\r\n              Solicitar acceso\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            onClick={() => {\r\n              setActiveSection(\"profile\");\r\n              router.push(\"/profile\");\r\n            }}\r\n            className={`relative px-4 py-3.5 rounded-xl cursor-pointer font-medium text-sm transition-all ${\r\n              activeSection === \"profile\"\r\n                ? \"bg-white/15 text-white\"\r\n                : \"text-white/80 hover:bg-white/10\"\r\n            }`}\r\n          >\r\n            {activeSection === \"profile\" && (\r\n              <span className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r\"></span>\r\n            )}\r\n            Mi perfil\r\n          </div>\r\n        </nav>\r\n\r\n        <div className=\"mt-auto pt-5 border-t border-white/10\">\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center justify-center gap-2 py-2 text-blue-200 hover:text-white transition-colors text-sm font-medium\"\r\n            type=\"button\"\r\n          >\r\n            Cerrar sesi√≥n\r\n          </button>\r\n        </div>\r\n      </aside>\r\n\r\n      <main \r\n        ref={mainContentRef}\r\n        className=\"flex-1 ml-72 bg-gray-50 p-8 overflow-y-auto\"\r\n      >\r\n        <div className=\"fixed top-0 left-72 right-0 h-16 bg-white shadow-sm flex items-center justify-between px-8 z-40\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"text-sm text-gray-500 uppercase font-semibold\">\r\n              {activeSection === \"gallery\"\r\n                ? \"Dashboard\"\r\n                : activeSection === \"requests\"\r\n                ? \"Solicitudes\"\r\n                : \"Mi perfil\"}\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-4\">\r\n            <NotificationsDropdown\r\n              notifications={notifications}\r\n              unreadCount={unreadCount}\r\n              loading={notificationsLoading}\r\n              markAsRead={markAsRead}\r\n              markAllAsRead={markAllAsRead}\r\n              deleteNotification={deleteNotification}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-24\">\r\n\r\n  {/* T√çTULO + DESCRIPCI√ìN */}\r\n  <div className=\"mb-8\">\r\n    <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n      {org.role === \"hotel\" ? \"Mi Galer√≠a\" : \"Hoteles Disponibles\"}\r\n    </h2>\r\n    <p className=\"text-gray-600 text-base max-w-2xl\">\r\n      {org.role === \"hotel\"\r\n        ? \"Gestiona y comparte tu contenido multimedia con agencias autorizadas\"\r\n        : \"Accede al contenido multimedia de tus hoteles asociados\"}\r\n    </p>\r\n  </div>\r\n\r\n  {/* üëá AQU√ç VA VisualImpactGallery */}\r\n  {org.role === \"hotel\" && media.length > 0 && (\r\n  <div className=\"mb-12\">\r\n    <div className=\"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg\">\r\n      <div className=\"p-8\">\r\n        <VisualImpactGallery media={media} />\r\n      </div>\r\n    </div>\r\n  </div>\r\n)}\r\n\r\n\r\n  {/* üëá DESPU√âS empieza la galer√≠a normal */}\r\n  {org.role === \"hotel\" && (\r\n    <div className=\"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden\">\r\n      <div className=\"p-8\">\r\n                <div className=\"mb-6 flex flex-wrap gap-3\">\r\n                  {[\r\n                    { key: \"all\", label: \"Todas\" },\r\n                    { key: \"exterior\", label: \"Exterior\" },\r\n                    { key: \"habitaciones\", label: \"Habitaciones\" },\r\n                    { key: \"interior\", label: \"Interior\" },\r\n                    { key: \"salas_comunes\", label: \"Salas comunes\" },\r\n                    { key: \"restaurante\", label: \"Restaurante\" },\r\n                    { key: \"piscina\", label: \"Piscina\" },\r\n                    { key: \"spa\", label: \"Spa\" },\r\n                    { key: \"otros\", label: \"Otros\" },\r\n                  ].map((cat) => (\r\n                    <button\r\n                      key={cat.key}\r\n                      onClick={() => setSelectedCategory(cat.key)}\r\n                      className={`px-4 py-2 rounded-full text-sm font-medium border transition-all ${\r\n                        selectedCategory === cat.key\r\n                          ? \"bg-blue-600 text-white border-blue-600\"\r\n                          : \"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200\"\r\n                      }`}\r\n                    >\r\n                      {cat.label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                {sortedByDateMedia.length === 0 ? (\r\n                  <div className=\"text-center py-16 px-8\">\r\n                    <div className=\"text-6xl mb-4 opacity-30\">üì∑</div>\r\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n                      {selectedCategory === \"all\"\r\n                        ? \"Bienvenido a tu galer√≠a\"\r\n                        : `No hay contenido en \"${selectedCategory.replace(\"_\", \" \")}\"`}\r\n                    </h3>\r\n                    <p className=\"text-gray-600 text-base mb-8 max-w-lg mx-auto\">\r\n                      {selectedCategory === \"all\"\r\n                        ? \"Sube tus primeras fotos y videos para empezar a compartir tu contenido.\"\r\n                        : \"No hay contenido en esta categor√≠a. Cambia el filtro o sube nuevo contenido.\"}\r\n                    </p>\r\n\r\n                    {selectedCategory === \"all\" && (\r\n                      <button\r\n                        onClick={() => router.push(\"/hotel-media\")}\r\n                        className=\"px-8 py-3 bg-blue-600 text-white rounded-lg font-medium text-sm hover:bg-blue-700 transition shadow-md\"\r\n                      >\r\n                        Subir mi primer contenido\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                      {sortedByDateMedia.map((item, index) => (\r\n                        <div\r\n                          key={item.id || index}\r\n                          className=\"relative rounded-2xl overflow-hidden bg-white shadow-md cursor-pointer\"\r\n                          onClick={() => setSelectedImage(item)}\r\n                        >\r\n                          {item.type === \"video\" ? (\r\n                            <div className=\"w-full h-64 bg-gray-900 flex items-center justify-center text-white text-3xl\">\r\n                              ‚ñ∂\r\n                            </div>\r\n                          ) : (\r\n                            <img\r\n                              src={item.url}\r\n                              alt={`Media ${index}`}\r\n                              loading=\"lazy\"\r\n                              className=\"w-full h-64 object-cover\"\r\n                              onError={(e) => {\r\n                                e.currentTarget.src = \"https://via.placeholder.com/400x300?text=Imagen+no+disponible\";\r\n                              }}\r\n                            />\r\n                          )}\r\n\r\n                          <div \r\n                            className=\"absolute bottom-0 left-0 w-full bg-gradient-to-t from-white/95 to-white/80 p-4\"\r\n                            style={{\r\n                              transition: 'all 1200ms cubic-bezier(0.34, 1.56, 0.64, 1)',\r\n                              height: hoveredCard === item.id ? '160px' : '56px',\r\n                              overflow: 'hidden',\r\n                            }}\r\n                            onMouseEnter={() => setHoveredCard(item.id)}\r\n                            onMouseLeave={() => setHoveredCard(null)}\r\n                          >\r\n                            <h3 className=\"text-sm font-semibold text-gray-900 leading-snug\">\r\n                              {item.ai_title?.trim() ? item.ai_title : item.category?.replace(\"_\", \" \") || \"Imagen del hotel\"}\r\n                            </h3>\r\n\r\n                            {hoveredCard === item.id && (\r\n                              <div \r\n                                className=\"mt-3 text-xs text-gray-700 space-y-1.5\"\r\n                                style={{\r\n                                  transition: 'opacity 800ms ease-out, transform 800ms ease-out',\r\n                                  transform: hoveredCard === item.id ? 'translateY(0)' : 'translateY(10px)',\r\n                                  opacity: hoveredCard === item.id ? 1 : 0,\r\n                                }}\r\n                              >\r\n                                <div className=\"flex items-center gap-1.5\">\r\n                                  <span className=\"font-medium text-blue-600\">üè∑Ô∏è</span>\r\n                                  <span>{item.category?.replace(\"_\", \" \") || \"N/A\"}</span>\r\n                                </div>\r\n\r\n                                {item.tags && (\r\n                                  <div className=\"flex flex-wrap gap-1.5\">\r\n                                    {normalizeDashboardTags(item.tags).slice(0, 3).map((tag, i) => (\r\n                                      <span \r\n                                        key={i} \r\n                                        className=\"px-2 py-0.5 bg-blue-50 text-blue-700 rounded-full text-[11px] font-medium\"\r\n                                      >\r\n                                        {tag}\r\n                                      </span>\r\n                                    ))}\r\n                                  </div>\r\n                                )}\r\n\r\n                                <div className=\"flex items-center gap-1.5\">\r\n                                  <span className=\"font-medium text-blue-600\">üìÖ</span>\r\n                                  <span>{item.created_at ? new Date(item.created_at).toLocaleDateString() : \"Fecha no disponible\"}</span>\r\n                                </div>\r\n\r\n                                {item.quality_score !== null && (\r\n                                  <div className=\"flex items-center gap-1.5\">\r\n                                    <span className=\"font-medium text-blue-600\">‚≠ê</span>\r\n                                    <span>{item.quality_score}/100</span>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n\r\n                    <div className=\"text-center mt-8\">\r\n                      <button\r\n                        onClick={() => router.push(\"/hotel-media\")}\r\n                        className=\"px-6 py-2.5 bg-blue-50 text-blue-600 rounded-lg font-medium text-sm hover:bg-blue-100 transition\"\r\n                      >\r\n                        Subir o gestionar m√°s contenido\r\n                      </button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {org.role === \"agency\" && (\r\n            <div className=\"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden\">\r\n              <div className=\"p-8\">\r\n                {approvedHotels.length === 0 ? (\r\n                  <div className=\"text-center py-16 px-8\">\r\n                    <div className=\"text-6xl mb-4 opacity-30\">üè®</div>\r\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n                      Sin acceso a hoteles\r\n                    </h3>\r\n                    <p className=\"text-gray-600 text-base mb-8 max-w-lg mx-auto\">\r\n                      Solicita acceso a hoteles para comenzar a explorar su contenido multimedia.\r\n                    </p>\r\n\r\n                    <button\r\n                      onClick={() => router.push(\"/agency-requests\")}\r\n                      className=\"px-8 py-3 bg-blue-600 text-white rounded-lg font-medium text-sm hover:bg-blue-700 transition shadow-md\"\r\n                    >\r\n                      Solicitar acceso ahora\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {approvedHotels.map((hotel) => (\r\n                      <div\r\n                        key={hotel.id}\r\n                        onClick={() => toggleHotelGallery(hotel.id)}\r\n                        className={`bg-white rounded-xl border transition-all cursor-pointer ${\r\n                          expandedHotelId === hotel.id\r\n                            ? \"border-blue-400 shadow-md\"\r\n                            : \"border-gray-200 hover:border-blue-300\"\r\n                        }`}\r\n                      >\r\n                        <div className=\"p-5\">\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <h4 className=\"text-lg font-bold text-gray-900\">\r\n                              {hotel.name}\r\n                            </h4>\r\n                            <span className=\"text-sm font-bold\">\r\n                              {expandedHotelId === hotel.id ? \"‚àí\" : \"+\"}\r\n                            </span>\r\n                          </div>\r\n\r\n                          {expandedHotelId === hotel.id && media.length > 0 && (\r\n                            <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n                              <div className=\"grid grid-cols-3 gap-2 mb-4\">\r\n                                {media.slice(0, 6).map((item, idx) => (\r\n                                  <div\r\n                                    key={idx}\r\n                                    className=\"aspect-square rounded overflow-hidden border\"\r\n                                  >\r\n                                    {item.type === \"video\" ? (\r\n                                      <div className=\"w-full h-full bg-gray-800 flex items-center justify-center text-white\">\r\n                                        ‚ñ∂\r\n                                      </div>\r\n                                    ) : (\r\n                                      <img\r\n                                        src={item.url}\r\n                                        alt={`Preview ${idx}`}\r\n                                        className=\"w-full h-full object-cover\"\r\n                                        onError={(e) => {\r\n                                          e.currentTarget.src = \"https://via.placeholder.com/150?text=No+disponible\";\r\n                                        }}\r\n                                      />\r\n                                    )}\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n\r\n                              <button\r\n                                onClick={(e) => {\r\n                                  e.stopPropagation();\r\n                                  router.push(`/hotel-gallery/${hotel.id}`);\r\n                                }}\r\n                                className=\"w-full bg-blue-600 text-white text-sm font-medium py-2 rounded-lg hover:bg-blue-700 transition\"\r\n                              >\r\n                                Ver galer√≠a completa\r\n                              </button>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      {/* ‚úÖ PANEL DE DESCARGA OPTIMIZADO - IMAGEN CENTRADA CON LA TABLA */}\r\n      {selectedImage && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\"\r\n          onClick={() => setSelectedImage(null)}\r\n        >\r\n          <div className=\"bg-white rounded-2xl w-full max-w-6xl max-h-[95vh] flex flex-col overflow-hidden shadow-2xl\">\r\n            {/* Encabezado que abarca TODO el ancho */}\r\n            <div className=\"p-6 md:p-8 border-b border-gray-200\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div>\r\n                  <h3 className=\"text-2xl font-bold text-gray-900 mb-1\">\r\n                    {selectedImage.ai_title?.trim() || \"Imagen del hotel\"}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    {selectedImage.category?.replace(\"_\", \" \") || \"Sin categor√≠a\"}\r\n                  </p>\r\n                </div>\r\n                <button \r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setSelectedImage(null);\r\n                  }}\r\n                  className=\"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center transition-colors\"\r\n                  aria-label=\"Cerrar panel\"\r\n                >\r\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Contenido dividido en dos columnas */}\r\n            <div className=\"flex flex-col md:flex-row overflow-hidden\">\r\n              {/* Contenedor de imagen - CENTRADO CON LA TABLA */}\r\n              <div className=\"md:w-1/2 flex items-center justify-center bg-white-50 p-6 md:p-8\">\r\n                <div className=\"w-full max-w-[90%] max-h-[75vh] flex items-center justify-center\">\r\n                  <img \r\n                    src={selectedImage.url} \r\n                    alt={selectedImage.ai_title || \"Imagen del hotel\"}\r\n                    className=\"max-w-full max-h-[75vh] object-contain rounded-lg shadow-lg\"\r\n                    loading=\"lazy\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Panel de descargas - SIN SCROLL Y 100% EN ESPA√ëOL */}\r\n              <div className=\"md:w-1/2 p-6 md:p-8 overflow-y-auto\">\r\n                {renderDownloadTable(selectedImage.versions)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx global>{`\r\n@keyframes fade-in-down {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-10px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.animate-fade-in-down {\r\n  animation: fade-in-down 0.2s ease-out;\r\n}\r\n\r\n/* =========================\r\n   BURBUJAS ‚Äì MOVIMIENTO ORG√ÅNICO\r\n   ========================= */\r\n\r\n@keyframes bubbleFloatSlow {\r\n  0%   { transform: translate(-50%, -50%) translate(0px, 0px); }\r\n  25%  { transform: translate(-50%, -50%) translate(6px, -10px); }\r\n  50%  { transform: translate(-50%, -50%) translate(-4px, -18px); }\r\n  75%  { transform: translate(-50%, -50%) translate(5px, -10px); }\r\n  100% { transform: translate(-50%, -50%) translate(0px, 0px); }\r\n}\r\n\r\n@keyframes bubbleFloatMedium {\r\n  0%   { transform: translate(-50%, -50%) translate(0px, 0px); }\r\n  25%  { transform: translate(-50%, -50%) translate(-8px, -14px); }\r\n  50%  { transform: translate(-50%, -50%) translate(6px, -24px); }\r\n  75%  { transform: translate(-50%, -50%) translate(-6px, -14px); }\r\n  100% { transform: translate(-50%, -50%) translate(0px, 0px); }\r\n}\r\n\r\n@keyframes bubbleFloatLarge {\r\n  0%   { transform: translate(-50%, -50%) translate(0px, 0px); }\r\n  25%  { transform: translate(-50%, -50%) translate(10px, -18px); }\r\n  50%  { transform: translate(-50%, -50%) translate(-8px, -30px); }\r\n  75%  { transform: translate(-50%, -50%) translate(8px, -18px); }\r\n  100% { transform: translate(-50%, -50%) translate(0px, 0px); }\r\n}\r\n`}</style>\r\n\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}