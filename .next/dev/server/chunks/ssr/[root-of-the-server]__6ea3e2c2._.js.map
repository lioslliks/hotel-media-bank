{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/lib/supabaseClient.ts"],"sourcesContent":["// src/lib/supabaseClient.ts\r\n\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\n// ------------------------------------------------------------\r\n// ‚≠ê Validaci√≥n estricta de variables de entorno\r\n// ------------------------------------------------------------\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (\r\n  !supabaseUrl ||\r\n  !supabaseAnonKey ||\r\n  supabaseUrl === \"undefined\" ||\r\n  supabaseAnonKey === \"undefined\" ||\r\n  supabaseUrl === \"null\" ||\r\n  supabaseAnonKey === \"null\"\r\n) {\r\n  throw new Error(\r\n    \"‚ùå Supabase environment variables are missing or invalid. Check NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\r\n  );\r\n}\r\n\r\n// ------------------------------------------------------------\r\n// ‚≠ê Crear cliente Supabase (modo frontend con sesi√≥n persistente)\r\n// ------------------------------------------------------------\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    persistSession: true,        // ‚Üê NECESARIO para login\r\n    autoRefreshToken: true,      // ‚Üê refresca tokens autom√°ticamente\r\n    detectSessionInUrl: true,    // ‚Üê necesario para magic links / OAuth\r\n  },\r\n});\r\n\r\n// ------------------------------------------------------------\r\n// (Opcional) Log controlado solo en desarrollo\r\n// ------------------------------------------------------------\r\nif (process.env.NODE_ENV === \"development\") {\r\n  console.log(\"üîå Supabase client initialized\");\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,4BAA4B;AAE5B;;AAEA,+DAA+D;AAC/D,gDAAgD;AAChD,+DAA+D;AAC/D,MAAM;AACN,MAAM;AAEN;;AAgBO,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEA,+DAA+D;AAC/D,+CAA+C;AAC/C,+DAA+D;AAC/D,wCAA4C;IAC1C,QAAQ,GAAG,CAAC;AACd"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/hooks/useNotifications.ts"],"sourcesContent":["import { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { supabase } from '../lib/supabaseClient';\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  user_id: string;\r\n  organization_id: string;\r\n  type: string;\r\n  title: string;\r\n  message: string;\r\n  data: any;\r\n  is_read: boolean;\r\n  created_at: string;\r\n  related_id?: string;\r\n  date?: string;\r\n}\r\n\r\nexport function useNotifications(userId: string | null) {\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  // ‚úÖ useRef para evitar dependencias inestables en el efecto\r\n  const notificationsRef = useRef<Notification[]>([]);\r\n  notificationsRef.current = notifications;\r\n\r\n  const loadNotifications = useCallback(async () => {\r\n    if (!userId) {\r\n      setNotifications([]);\r\n      setUnreadCount(0);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('notifications')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .order('created_at', { ascending: false })\r\n        .limit(20);\r\n\r\n      if (error) throw error;\r\n\r\n      const notificationsClean = (data || []).map((n: any) => ({\r\n        ...n,\r\n        date: undefined\r\n      }));\r\n\r\n      setNotifications(notificationsClean);\r\n      setUnreadCount(notificationsClean.filter((n: Notification) => !n.is_read).length);\r\n    } catch (error) {\r\n      console.error('Error loading notifications:', error);\r\n      setNotifications([]);\r\n      setUnreadCount(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [userId]);\r\n\r\n  const markAsRead = useCallback(async (notificationId: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .update({ is_read: true })\r\n        .eq('id', notificationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev =>\r\n        prev.map(n => (n.id === notificationId ? { ...n, is_read: true } : n))\r\n      );\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    } catch (error) {\r\n      console.error('Error marking notification as read:', error);\r\n    }\r\n  }, []);\r\n\r\n  const markAllAsRead = useCallback(async () => {\r\n    if (!userId) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .update({ is_read: true })\r\n        .eq('user_id', userId)\r\n        .eq('is_read', false);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev => prev.map(n => ({ ...n, is_read: true })));\r\n      setUnreadCount(0);\r\n    } catch (error) {\r\n      console.error('Error marking all notifications as read:', error);\r\n    }\r\n  }, [userId]);\r\n\r\n  const deleteNotification = useCallback(async (notificationId: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .delete()\r\n        .eq('id', notificationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev => prev.filter(n => n.id !== notificationId));\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    } catch (error) {\r\n      console.error('Error deleting notification:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // ‚úÖ Cargar notificaciones al montar y cuando userId cambia\r\n    loadNotifications();\r\n\r\n    // ‚úÖ Salir si no hay userId v√°lido\r\n    if (!userId) {\r\n      return;\r\n    }\r\n\r\n    // ‚úÖ Configurar canal de tiempo real SIN depender del estado notifications\r\n    const channel = supabase\r\n      .channel(`notifications:${userId}`)\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'notifications',\r\n          filter: `user_id=eq.${userId}`\r\n        },\r\n        (payload) => {\r\n          console.log('Realtime event:', payload.eventType, payload);\r\n\r\n          if (payload.eventType === 'INSERT') {\r\n            const newNotification = {\r\n              ...(payload.new as any),\r\n              date: undefined\r\n            };\r\n            setNotifications(prev => [newNotification as Notification, ...prev]);\r\n            \r\n            if (!(payload.new as any).is_read) {\r\n              setUnreadCount(prev => prev + 1);\r\n            }\r\n          }\r\n          else if (payload.eventType === 'UPDATE') {\r\n            const newNotification = {\r\n              ...(payload.new as any),\r\n              date: undefined\r\n            } as Notification;\r\n\r\n            setNotifications(prev =>\r\n              prev.map(n => (n.id === newNotification.id ? { ...n, ...newNotification } : n))\r\n            );\r\n\r\n            // ‚úÖ USAR payload.old y payload.new DIRECTAMENTE (sin depender del estado)\r\n            const oldIsRead = (payload.old as any).is_read;\r\n            const newIsRead = (payload.new as any).is_read;\r\n            \r\n            if (oldIsRead !== newIsRead) {\r\n              if (newIsRead) {\r\n                setUnreadCount(prev => Math.max(0, prev - 1));\r\n              } else {\r\n                setUnreadCount(prev => prev + 1);\r\n              }\r\n            }\r\n          }\r\n          else if (payload.eventType === 'DELETE') {\r\n            const deletedNotification = payload.old as Notification;\r\n            setNotifications(prev => prev.filter(n => n.id !== deletedNotification.id));\r\n            \r\n            // ‚úÖ USAR payload.old DIRECTAMENTE para verificar is_read\r\n            if (!(payload.old as any).is_read) {\r\n              setUnreadCount(prev => Math.max(0, prev - 1));\r\n            }\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    // ‚úÖ Limpieza del canal al desmontar o cambiar userId\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [userId, loadNotifications]); // ‚úÖ SOLO estas dos dependencias estables\r\n\r\n  return {\r\n    notifications,\r\n    unreadCount,\r\n    loading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n    reload: loadNotifications\r\n  };\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/app/hotel-gallery/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { supabase } from \"../../../lib/supabaseClient\";\r\nimport { useNotifications } from '../../../hooks/useNotifications';\r\n\r\ninterface MediaItem {\r\n  id: string;\r\n  url: string;\r\n  type: string;\r\n  tags?: any;\r\n  category?: string;\r\n  quality_score?: number;\r\n  created_at: string;\r\n  ai_title?: string;\r\n  versions?: any;\r\n}\r\n\r\ninterface Hotel {\r\n  id: string;\r\n  name: string;\r\n  stars?: number;\r\n  hotel_type?: string;\r\n  address?: string;\r\n  city?: string;\r\n  province?: string;\r\n  country?: string;\r\n  profile_image?: string;\r\n}\r\n\r\ninterface Notification {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  date: string;\r\n  read?: boolean;\r\n}\r\n\r\ninterface NotificationsDropdownProps {\r\n  notifications: Notification[];\r\n  unreadCount: number;\r\n  loading: boolean;\r\n  markAsRead: (id: string) => void;\r\n  markAllAsRead: () => void;\r\n  deleteNotification: (id: string) => void;\r\n}\r\n\r\nconst NotificationsDropdown = ({ \r\n  notifications, \r\n  unreadCount, \r\n  loading, \r\n  markAsRead, \r\n  markAllAsRead, \r\n  deleteNotification \r\n}: NotificationsDropdownProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      const target = event.target as HTMLElement;\r\n      if (!target.closest('.notifications-dropdown')) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"notifications-dropdown relative\">\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-gray-600 hover:text-blue-600 transition-all hover:-translate-y-0.5\"\r\n      >\r\n        <svg\r\n          className=\"w-6 h-6\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"1.8\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M14.857 17.657A2 2 0 0113 19H11a2 2 0 01-1.857-1.343M6 8a6 6 0 1112 0c0 3.5 1.5 5 2 5.5H4c.5-.5 2-2 2-5.5z\"\r\n          />\r\n        </svg>\r\n\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-semibold w-5 h-5 rounded-full flex items-center justify-center shadow\">\r\n            {unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-3 w-96 bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden z-50 animate-fade-in-down\">\r\n          <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50\">\r\n            <h3 className=\"font-semibold text-gray-900\">Notificaciones</h3>\r\n\r\n            {unreadCount > 0 && (\r\n              <button\r\n                onClick={markAllAsRead}\r\n                className=\"text-xs font-medium text-blue-600 hover:text-blue-700 hover:underline\"\r\n              >\r\n                Marcar todo como le√≠do\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {loading && (\r\n            <div className=\"p-6 text-center text-gray-500 text-sm\">\r\n              <div className=\"w-6 h-6 mx-auto mb-2 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n              Cargando notificaciones...\r\n            </div>\r\n          )}\r\n\r\n          {!loading && notifications.length === 0 && (\r\n            <div className=\"p-6 text-center text-gray-500 text-sm\">\r\n              <div className=\"text-5xl mb-3 opacity-30\">üîî</div>\r\n              No hay notificaciones\r\n            </div>\r\n          )}\r\n\r\n          {!loading && notifications.length > 0 && (\r\n            <div className=\"max-h-96 overflow-y-auto divide-y divide-gray-100\">\r\n              {notifications.map((n) => (\r\n                <div\r\n                  key={n.id}\r\n                  className={`flex items-start gap-3 px-4 py-4 transition-all cursor-pointer ${\r\n                    !n.read ? \"bg-blue-50\" : \"hover:bg-gray-50\"\r\n                  }`}\r\n                  onClick={() => !n.read && markAsRead(n.id)}\r\n                >\r\n                  <div className=\"pt-1\">\r\n                    {!n.read && (\r\n                      <span className=\"block w-2 h-2 bg-blue-600 rounded-full animate-pulse\"></span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-semibold text-gray-900\">\r\n                      {n.title}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-600 mt-1\">{n.message}</p>\r\n                    <p className=\"text-[11px] text-gray-400 mt-1\">{n.date}</p>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-start\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        deleteNotification(n.id);\r\n                      }}\r\n                      className=\"text-gray-400 hover:text-red-600 hover:scale-110 transition-transform\"\r\n                      title=\"Eliminar\"\r\n                    >\r\n                      <svg\r\n                        className=\"w-4 h-4\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          d=\"M6 18L18 6M6 6l12 12\"\r\n                        />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function HotelGalleryPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const hotelId = params?.id as string;\r\n\r\n  const [hotel, setHotel] = useState<Hotel | null>(null);\r\n  const [media, setMedia] = useState<MediaItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\r\n  const [selectedImage, setSelectedImage] = useState<MediaItem | null>(null);\r\n  const [showErrorReport, setShowErrorReport] = useState<string | null>(null);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [hoveredCard, setHoveredCard] = useState<string | null>(null);\r\n\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    loading: notificationsLoading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n  } = useNotifications(userId);\r\n\r\n  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n\r\n  const toggleSelectImage = (id: string) => {\r\n    setSelectedImages((prev) =>\r\n      prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  const normalizeHotelGalleryTags = (raw: any): string[] => {\r\n    if (!raw) return [];\r\n    if (typeof raw === 'string') {\r\n      try {\r\n        return normalizeHotelGalleryTags(JSON.parse(raw));\r\n      } catch {\r\n        return [];\r\n      }\r\n    }\r\n    if (Array.isArray(raw)) {\r\n      return raw\r\n        .map(t => {\r\n          if (typeof t === 'string') {\r\n            try {\r\n              const parsed = JSON.parse(t);\r\n              return parsed?.label ?? t;\r\n            } catch {\r\n              return t;\r\n            }\r\n          }\r\n          if (typeof t === 'object') {\r\n            return t.label ?? t.tag ?? null;\r\n          }\r\n          return null;\r\n        })\r\n        .filter(Boolean)\r\n        .map(t => String(t).toLowerCase());\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const getCorrectedCategory = (item: MediaItem) => {\r\n    if (item.tags?.includes(\"restaurant\")) {\r\n      return \"restaurante\";\r\n    }\r\n    if (item.tags?.includes(\"suite\")) {\r\n      return \"habitaciones\";\r\n    }\r\n    return item.category;\r\n  };\r\n\r\n  const handleDownload = async (url: string, filename: string) => {\r\n    try {\r\n      const response = await fetch(url);\r\n      const blob = await response.blob();\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = blobUrl;\r\n      a.download = filename;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(blobUrl);\r\n    } catch (error) {\r\n      console.error('Error al descargar la imagen:', error);\r\n      alert('Error al descargar la imagen. Int√©ntalo de nuevo.');\r\n    }\r\n  };\r\n\r\n  const renderDownloadTable = (versions: any) => {\r\n    if (!versions) return null;\r\n    \r\n    const originalDimensions = versions.original?.dimensions;\r\n    let originalWidth = 0;\r\n    let originalHeight = 0;\r\n\r\n    if (originalDimensions) {\r\n      const [w, h] = originalDimensions.split('x').map(Number);\r\n      originalWidth = w;\r\n      originalHeight = h;\r\n    }\r\n\r\n    const validVersions = Object.entries(versions)\r\n      .filter(([size, details]: [string, any]) => {\r\n        if (size === 'original') return true;\r\n        if (!details?.dimensions) return false;\r\n        const [w, h] = details.dimensions.split('x').map(Number);\r\n        return w <= originalWidth && h <= originalHeight;\r\n      })\r\n      .sort((a, b) => {\r\n        const order = ['thumbnail', 'small', 'medium', 'large', 'original'];\r\n        return order.indexOf(a[0]) - order.indexOf(b[0]);\r\n      });\r\n\r\n    return (\r\n      <div className=\"mt-6\">\r\n        <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Opciones de descarga</h4>\r\n        <div className=\"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200 table-fixed\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4\">\r\n                    Descripci√≥n\r\n                  </th>\r\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4\">\r\n                    Dimensiones\r\n                  </th>\r\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4\">\r\n                    Relaci√≥n\r\n                  </th>\r\n                  <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4\">\r\n                    Acciones\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {validVersions.map(([size, details]: [string, any]) => (\r\n                  <tr key={size} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 truncate\">\r\n                      {size === 'thumbnail' ? 'Miniatura' : \r\n                       size === 'small' ? 'Peque√±o' : \r\n                       size === 'medium' ? 'Mediano' : \r\n                       size === 'large' ? 'Grande' : 'Original'}\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500 truncate\">\r\n                      {details.dimensions}\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500 truncate\">\r\n                      {details.aspect_ratio}\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                      <div className=\"flex justify-end gap-2\">\r\n                        {/* ‚úÖ BOT√ìN DE DESCARGA CON ICONO ELEGANTE */}\r\n                        <button\r\n                          onClick={() =>\r\n                            handleDownload(details.url, `${size}-${Date.now()}.jpg`)\r\n                          }\r\n                          className=\"inline-flex items-center justify-center w-9 h-9 rounded-lg text-blue-600 bg-blue-50 hover:bg-blue-100 transition-colors shadow-sm hover:shadow-md\"\r\n                          title=\"Descargar\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\r\n                          </svg>\r\n                        </button>\r\n                        \r\n                        {/* ‚úÖ BOT√ìN DE VER CON ICONO ELEGANTE */}\r\n                        <a\r\n                          href={details.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"inline-flex items-center justify-center w-9 h-9 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors shadow-sm hover:shadow\"\r\n                          title=\"Ver imagen\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\r\n                          </svg>\r\n                        </a>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadGallery = async () => {\r\n      try {\r\n        const { data: sessionData } = await supabase.auth.getSession();\r\n        if (!sessionData?.session) {\r\n          router.push(\"/login\");\r\n          return;\r\n        }\r\n\r\n        const userId = sessionData.session.user.id;\r\n        setUserId(userId);\r\n\r\n        const { data: orgData } = await supabase\r\n          .from(\"organizations\")\r\n          .select(\"id, role\")\r\n          .eq(\"created_by\", userId)\r\n          .maybeSingle();\r\n\r\n        if (!orgData || orgData.role !== \"agency\") {\r\n          router.push(\"/dashboard\");\r\n          return;\r\n        }\r\n\r\n        const { data: accessData } = await supabase\r\n          .from(\"agency_hotel_access\")\r\n          .select(\"status\")\r\n          .eq(\"agency_id\", orgData.id)\r\n          .eq(\"hotel_id\", hotelId)\r\n          .maybeSingle();\r\n\r\n        if (!accessData || accessData.status !== \"approved\") {\r\n          alert(\"No tienes acceso a este hotel\");\r\n          router.push(\"/dashboard\");\r\n          return;\r\n        }\r\n\r\n        const { data: hotelData } = await supabase\r\n          .from(\"organizations\")\r\n          .select(\"*\")\r\n          .eq(\"id\", hotelId)\r\n          .maybeSingle();\r\n\r\n        if (!hotelData) {\r\n          router.push(\"/dashboard\");\r\n          return;\r\n        }\r\n\r\n        setHotel(hotelData as Hotel);\r\n\r\n        const { data: mediaData } = await supabase\r\n          .from(\"media\")\r\n          .select(\"id, url, type, tags, category, quality_score, created_at, ai_title, versions\")\r\n          .eq(\"hotel_id\", hotelId)\r\n          .order(\"created_at\", { ascending: false });\r\n\r\n        const parsedMedia = mediaData?.map(item => {\r\n          let versions = item.versions;\r\n          if (versions && typeof versions === 'string') {\r\n            try {\r\n              versions = JSON.parse(versions);\r\n            } catch {\r\n              // keep as-is\r\n            }\r\n          }\r\n          return {\r\n            ...item,\r\n            versions\r\n          };\r\n        }) || [];\r\n\r\n        const sortedMedia = [...parsedMedia].sort((a, b) => {\r\n          const qa = a.quality_score ?? 0;\r\n          const qb = b.quality_score ?? 0;\r\n          return qb - qa;\r\n        });\r\n\r\n        setMedia(sortedMedia);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Error loading gallery:\", err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (hotelId) loadGallery();\r\n  }, [hotelId, router]);\r\n\r\n  const filteredMedia =\r\n    selectedCategory === \"all\"\r\n      ? media\r\n      : media.filter((m) => getCorrectedCategory(m) === selectedCategory);\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut();\r\n    router.push(\"/\");\r\n  };\r\n\r\n  const goBack = () => {\r\n    router.push(\"/dashboard\");\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex justify-center items-center bg-gray-50\">\r\n        <div className=\"p-8 bg-white rounded-xl shadow-sm text-center\">\r\n          <div className=\"w-8 h-8 mx-auto mb-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          <p className=\"text-gray-600 text-base\">Cargando galer√≠a...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!hotel) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 font-sans\">\r\n      <aside className=\"w-72 bg-gradient-to-b from-blue-800 to-blue-900 text-white p-6 fixed left-0 top-0 h-screen flex flex-col\">\r\n        <div className=\"flex items-center mb-8 pb-3 border-b border-white/10\">\r\n          <h1 className=\"text-xl font-bold tracking-tight\">Hotel Media Bank</h1>\r\n        </div>\r\n\r\n        {hotel && (\r\n          <div className=\"bg-blue-100 rounded-xl p-4 mb-8 shadow-sm\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-12 h-12 rounded-full overflow-hidden flex-shrink-0\">\r\n                <img\r\n                  src={hotel.profile_image || `https://ui-avatars.com/api/?name=${encodeURIComponent(hotel.name)}&background=3b82f6&color=white`}\r\n                  alt={hotel.name}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"text-sm font-semibold text-blue-900 truncate mb-0.5\">\r\n                  {hotel.name}\r\n                </h3>\r\n                <p className=\"text-xs text-gray-600 capitalize\">\r\n                  Hotel\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <nav className=\"flex-1 flex flex-col gap-2 mb-8\">\r\n          <div \r\n            onClick={goBack}\r\n            className=\"px-4 py-3.5 rounded-lg cursor-pointer font-medium text-sm transition-all text-white/80 hover:bg-white/10 flex items-center gap-2\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n            </svg>\r\n            <span>Volver al Dashboard</span>\r\n          </div>\r\n        </nav>\r\n\r\n        <div className=\"mt-auto pt-5 border-t border-white/10\">\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center justify-center gap-2 py-0.5 text-blue-200/90 hover:text-white transition-colors text-sm font-medium\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\r\n            </svg>\r\n            Cerrar Sesi√≥n\r\n          </button>\r\n        </div>\r\n      </aside>\r\n\r\n      <main className=\"ml-72 p-6\">\r\n        <div className=\"fixed top-0 left-72 right-0 h-16 bg-white shadow-sm flex items-center justify-between px-8 z-40\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"text-sm text-gray-500 uppercase font-semibold\">\r\n              Galer√≠a del Hotel\r\n            </span>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-4\">\r\n            <NotificationsDropdown\r\n              notifications={notifications}\r\n              unreadCount={unreadCount}\r\n              loading={notificationsLoading}\r\n              markAsRead={markAsRead}\r\n              markAllAsRead={markAllAsRead}\r\n              deleteNotification={deleteNotification}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-24\">\r\n          <div className=\"max-w-7xl mx-auto px-4\">\r\n            <div className=\"mb-8 flex flex-wrap gap-2\">\r\n              {[\r\n                { key: \"all\", label: \"Todas\" },\r\n                { key: \"exterior\", label: \"Exterior\" },\r\n                { key: \"habitaciones\", label: \"Habitaciones\" },\r\n                { key: \"interior\", label: \"Interior\" },\r\n                { key: \"salas_comunes\", label: \"Salas comunes\" },\r\n                { key: \"restaurante\", label: \"Restaurante\" },\r\n                { key: \"piscina\", label: \"Piscina\" },\r\n                { key: \"spa\", label: \"Spa\" },\r\n                { key: \"otros\", label: \"Otros\" },\r\n              ].map((cat) => (\r\n                <button\r\n                  key={cat.key}\r\n                  onClick={() => setSelectedCategory(cat.key)}\r\n                  className={`px-4 py-2 rounded-full text-sm font-medium border transition-all ${\r\n                    selectedCategory === cat.key\r\n                      ? \"bg-blue-600 text-white border-blue-600 shadow-sm\"\r\n                      : \"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100\"\r\n                  }`}\r\n                >\r\n                  {cat.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {selectedCategory !== \"all\" && (\r\n              <a\r\n                href={`/api/download-category?hotel=${hotelId}&category=${selectedCategory}`}\r\n                className=\"inline-block mb-6 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition\"\r\n              >\r\n                Descargar categor√≠a\r\n              </a>\r\n            )}\r\n\r\n            {selectedCategory === \"all\" && (\r\n              <a\r\n                href={`/api/download-gallery?hotel=${hotelId}`}\r\n                className=\"inline-block mb-6 px-4 py-2 bg-gray-700 text-white rounded-lg text-sm font-medium hover:bg-gray-800\"\r\n              >\r\n                Descargar galer√≠a completa\r\n              </a>\r\n            )}\r\n\r\n            {selectedImages.length > 0 && (\r\n              <a\r\n                href={`/api/download-selection?ids=${selectedImages.join(\",\")}`}\r\n                className=\"inline-block mb-6 ml-3 px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition\"\r\n              >\r\n                Descargar selecci√≥n ({selectedImages.length})\r\n              </a>\r\n            )}\r\n\r\n            {filteredMedia.length === 0 ? (\r\n              <div className=\"text-center py-12 bg-gray-50 rounded-xl border border-gray-200\">\r\n                <h3 className=\"text-xl font-medium text-gray-700 mb-2\">\r\n                  {selectedCategory === \"all\"\r\n                    ? \"Sin contenido multimedia\"\r\n                    : `No hay contenido en \"${selectedCategory.replace(\"_\", \" \")}\"`}\r\n                </h3>\r\n                <p className=\"text-gray-500 text-base\">\r\n                  {selectedCategory === \"all\"\r\n                    ? \"Este hotel a√∫n no ha subido fotos o videos.\"\r\n                    : \"No hay contenido en esta categor√≠a.\"}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                {filteredMedia.map((item, index) => (\r\n                  <div\r\n                    key={item.id}\r\n                    className={`bg-white rounded-2xl overflow-hidden shadow-md cursor-pointer ${\r\n                      selectedImages.includes(item.id)\r\n                        ? 'ring-2 ring-blue-500 ring-offset-2'\r\n                        : ''\r\n                    }`}\r\n                    onClick={() => setSelectedImage(item)}\r\n                  >\r\n                    <div className=\"relative\">\r\n\r\n                      <label\r\n                        htmlFor={`select-${item.id}`}\r\n                        className=\"absolute top-3 right-3 z-20 cursor-pointer\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                      >\r\n                        <input\r\n                          id={`select-${item.id}`}\r\n                          type=\"checkbox\"\r\n                          checked={selectedImages.includes(item.id)}\r\n                          onChange={() => toggleSelectImage(item.id)}\r\n                          className=\"hidden\"\r\n                        />\r\n\r\n                        <div\r\n                          className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${\r\n                            selectedImages.includes(item.id)\r\n                              ? 'border-blue-500 bg-blue-50'\r\n                              : 'border-gray-300 bg-white'\r\n                          }`}\r\n                        >\r\n                          <div\r\n                            className={`w-3 h-3 rounded-full transition-all duration-300 ${\r\n                              selectedImages.includes(item.id)\r\n                                ? 'bg-blue-500 scale-100 opacity-100'\r\n                                : 'bg-gray-300 scale-0 opacity-0'\r\n                            }`}\r\n                          />\r\n                        </div>\r\n                      </label>\r\n\r\n                      <img\r\n                        src={item.url}\r\n                        alt={item.category || \"Hotel media\"}\r\n                        className=\"w-full h-64 object-cover\"\r\n                        onError={(e) => {\r\n                          e.currentTarget.src =\r\n                            \"https://via.placeholder.com/400x300?text=Imagen+no+disponible\";\r\n                        }}\r\n                      />\r\n\r\n                      <div \r\n                        className=\"absolute bottom-0 left-0 w-full bg-gradient-to-t from-white/95 to-white/80 p-5\"\r\n                        style={{\r\n                          transition: 'all 1200ms cubic-bezier(0.34, 1.56, 0.64, 1)',\r\n                          height: hoveredCard === item.id ? '160px' : '56px',\r\n                          overflow: 'hidden',\r\n                        }}\r\n                        onMouseEnter={() => setHoveredCard(item.id)}\r\n                        onMouseLeave={() => setHoveredCard(null)}\r\n                      >\r\n                        <h3 className=\"text-sm font-semibold text-gray-900 leading-snug\">\r\n                          {item.ai_title?.trim() ? item.ai_title : \"Imagen del hotel\"}\r\n                        </h3>\r\n\r\n                        {hoveredCard === item.id && (\r\n                          <div \r\n                            className=\"mt-4 text-xs text-gray-700 space-y-2\"\r\n                            style={{\r\n                              transition: 'opacity 800ms ease-out, transform 800ms ease-out',\r\n                              transform: hoveredCard === item.id ? 'translateY(0)' : 'translateY(10px)',\r\n                              opacity: hoveredCard === item.id ? 1 : 0,\r\n                            }}\r\n                          >\r\n                            <div className=\"flex items-center gap-1.5\">\r\n                              <span className=\"font-medium text-blue-600\">üè∑Ô∏è</span>\r\n                              <span>{getCorrectedCategory(item)?.replace(\"_\", \" \") || \"N/A\"}</span>\r\n                            </div>\r\n\r\n                            {item.tags && (\r\n                              <div className=\"flex flex-wrap gap-1.5\">\r\n                                {normalizeHotelGalleryTags(item.tags).slice(0, 3).map((tag, i) => (\r\n                                  <span \r\n                                    key={i} \r\n                                    className=\"px-2 py-0.5 bg-blue-50 text-blue-700 rounded-full text-[11px] font-medium\"\r\n                                  >\r\n                                    {tag}\r\n                                  </span>\r\n                                ))}\r\n                              </div>\r\n                            )}\r\n\r\n                            <div className=\"flex items-center gap-1.5\">\r\n                              <span className=\"font-medium text-blue-600\">üìÖ</span>\r\n                              <span>{item.created_at ? new Date(item.created_at).toLocaleDateString() : \"Fecha no disponible\"}</span>\r\n                            </div>\r\n\r\n                            {item.quality_score !== null && (\r\n                              <div className=\"flex items-center gap-1.5\">\r\n                                <span className=\"font-medium text-blue-600\">‚≠ê</span>\r\n                                <span>{item.quality_score}/100</span>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      {/* ‚úÖ PANEL DE DESCARGA OPTIMIZADO - SIN SCROLL Y 100% EN ESPA√ëOL */}\r\n      {selectedImage && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\"\r\n          onClick={() => setSelectedImage(null)}\r\n        >\r\n          <div className=\"bg-white rounded-2xl w-full max-w-6xl max-h-[95vh] flex flex-col md:flex-row overflow-hidden shadow-2xl\">\r\n            {/* Contenedor de imagen CENTRADO y ADAPTATIVO */}\r\n            <div className=\"md:w-1/2 flex items-center justify-center bg-gray-50 p-6 md:p-8 border-b md:border-b-0 md:border-r border-gray-200\">\r\n              <div className=\"w-full max-w-[90%] max-h-[80vh] flex items-center justify-center\">\r\n                <img \r\n                  src={selectedImage.url} \r\n                  alt={selectedImage.ai_title || \"Imagen del hotel\"}\r\n                  className=\"max-w-full max-h-[75vh] object-contain rounded-lg shadow-lg\"\r\n                  loading=\"lazy\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Panel de descargas - SIN SCROLL Y 100% EN ESPA√ëOL */}\r\n            <div className=\"md:w-1/2 p-6 md:p-8\">\r\n              <div className=\"flex justify-between items-start mb-6 pb-4 border-b border-gray-200\">\r\n                <div>\r\n                  <h3 className=\"text-2xl font-bold text-gray-900 mb-1\">\r\n                    {selectedImage.ai_title?.trim() || \"Imagen del hotel\"}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    {selectedImage.category?.replace(\"_\", \" \") || \"Sin categor√≠a\"}\r\n                  </p>\r\n                </div>\r\n                <button \r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setSelectedImage(null);\r\n                  }}\r\n                  className=\"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center transition-colors\"\r\n                  aria-label=\"Cerrar panel\"\r\n                >\r\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n              \r\n              {renderDownloadTable(selectedImage.versions)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {showErrorReport && (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-xl shadow-xl w-full max-w-md\">\r\n            <div className=\"p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Corregir clasificaci√≥n</h3>\r\n              \r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Categor√≠a actual\r\n                </label>\r\n                <div className=\"bg-gray-50 border border-gray-300 rounded-lg p-2\">\r\n                  {media.find(m => m.id === showErrorReport)?.category?.replace(\"_\", \" \") || \"N/A\"}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Categor√≠a correcta\r\n                </label>\r\n                <select \r\n                  className=\"w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  defaultValue={media.find(m => m.id === showErrorReport)?.category}\r\n                >\r\n                  <option value=\"habitaciones\">Habitaciones</option>\r\n                  <option value=\"restaurante\">Restaurante</option>\r\n                  <option value=\"exterior\">Exterior</option>\r\n                  <option value=\"interior\">Interior</option>\r\n                  <option value=\"salas_comunes\">Salas comunes</option>\r\n                  <option value=\"piscina\">Piscina</option>\r\n                  <option value=\"spa\">Spa</option>\r\n                  <option value=\"otros\">Otros</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end gap-3\">\r\n                <button\r\n                  onClick={() => setShowErrorReport(null)}\r\n                  className=\"px-4 py-2 text-gray-700 hover:text-gray-900 border border-gray-300 rounded-lg transition\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    console.log(\"Reportando error de clasificaci√≥n\");\r\n                    setShowErrorReport(null);\r\n                  }}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\r\n                >\r\n                  Confirmar correcci√≥n\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx global>{`\r\n        @keyframes fade-in-down {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(-10px);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0);\r\n          }\r\n        }\r\n        .animate-fade-in-down {\r\n          animation: fade-in-down 0.2s ease-out;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}