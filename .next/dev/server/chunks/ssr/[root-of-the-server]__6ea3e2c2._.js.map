{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\n// ‚úÖ A√±ade esta verificaci√≥n\r\nconsole.log(\"Supabase URL:\", supabaseUrl);\r\nconsole.log(\"Supabase Key:\", supabaseAnonKey);\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error('Missing Supabase environment variables');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN,4BAA4B;AAC5B,QAAQ,GAAG,CAAC,iBAAiB;AAC7B,QAAQ,GAAG,CAAC,iBAAiB;AAE7B;;AAIO,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/hooks/useNotifications.ts"],"sourcesContent":["// src/hooks/useNotifications.ts\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { supabase } from '../lib/supabaseClient';\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  user_id: string;\r\n  organization_id: string;\r\n  type: string;\r\n  title: string;\r\n  message: string;\r\n  data: any;\r\n  is_read: boolean;\r\n  created_at: string;\r\n  date: string; // ‚úÖ A√ëADIDO: Propiedad requerida por NotificationsDropdown\r\n}\r\n\r\nexport function useNotifications(userId: string | null) {\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const loadNotifications = useCallback(async () => {\r\n    if (!userId) {\r\n      setNotifications([]);\r\n      setUnreadCount(0);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('notifications')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .order('created_at', { ascending: false })\r\n        .limit(20);\r\n\r\n      if (error) throw error;\r\n\r\n      // ‚úÖ Mapear para a√±adir la propiedad `date` basada en `created_at`\r\n      const notificationsWithDate = (data || []).map((n: any) => ({\r\n        ...n,\r\n        date: n.created_at // Convertir created_at ‚Üí date\r\n      }));\r\n\r\n      setNotifications(notificationsWithDate);\r\n      setUnreadCount(notificationsWithDate.filter((n: Notification) => !n.is_read).length);\r\n    } catch (error) {\r\n      console.error('Error loading notifications:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [userId]);\r\n\r\n  const markAsRead = useCallback(async (notificationId: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .update({ is_read: true })\r\n        .eq('id', notificationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev =>\r\n        prev.map(n => (n.id === notificationId ? { ...n, is_read: true } : n))\r\n      );\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    } catch (error) {\r\n      console.error('Error marking notification as read:', error);\r\n    }\r\n  }, []);\r\n\r\n  const markAllAsRead = useCallback(async () => {\r\n    if (!userId) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .update({ is_read: true })\r\n        .eq('user_id', userId)\r\n        .eq('is_read', false);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev => prev.map(n => ({ ...n, is_read: true })));\r\n      setUnreadCount(0);\r\n    } catch (error) {\r\n      console.error('Error marking all notifications as read:', error);\r\n    }\r\n  }, [userId]);\r\n\r\n  const deleteNotification = useCallback(async (notificationId: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('notifications')\r\n        .delete()\r\n        .eq('id', notificationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setNotifications(prev => prev.filter(n => n.id !== notificationId));\r\n      // Actualizar contador si la notificaci√≥n eliminada estaba sin leer\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    } catch (error) {\r\n      console.error('Error deleting notification:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadNotifications();\r\n\r\n    if (!userId) return;\r\n\r\n    const channel = supabase\r\n      .channel(`notifications:${userId}`)\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'notifications',\r\n          filter: `user_id=eq.${userId}`\r\n        },\r\n        (payload) => {\r\n          console.log('Realtime event:', payload.eventType, payload);\r\n\r\n          if (payload.eventType === 'INSERT') {\r\n            // Nueva notificaci√≥n\r\n            const newNotification = {\r\n              ...(payload.new as any),\r\n              date: (payload.new as any).created_at // ‚úÖ A√±adir date\r\n            };\r\n            setNotifications(prev => [newNotification as Notification, ...prev]);\r\n            if (!(payload.new as any).is_read) {\r\n              setUnreadCount(prev => prev + 1);\r\n            }\r\n          } else if (payload.eventType === 'UPDATE') {\r\n            // Notificaci√≥n actualizada (marcada como le√≠da/no le√≠da)\r\n            const oldNotification = notifications.find(n => n.id === payload.old.id);\r\n            const newNotification = {\r\n              ...(payload.new as any),\r\n              date: (payload.new as any).created_at // ‚úÖ A√±adir date\r\n            } as Notification;\r\n\r\n            setNotifications(prev =>\r\n              prev.map(n => (n.id === newNotification.id ? { ...n, ...newNotification } : n))\r\n            );\r\n\r\n            // Actualizar contador si cambi√≥ el estado de lectura\r\n            if (oldNotification && oldNotification.is_read !== newNotification.is_read) {\r\n              if (newNotification.is_read) {\r\n                setUnreadCount(prev => Math.max(0, prev - 1));\r\n              } else {\r\n                setUnreadCount(prev => prev + 1);\r\n              }\r\n            }\r\n          } else if (payload.eventType === 'DELETE') {\r\n            // Notificaci√≥n eliminada\r\n            const deletedNotification = payload.old as Notification;\r\n            setNotifications(prev => prev.filter(n => n.id !== deletedNotification.id));\r\n            \r\n            // Actualizar contador si la notificaci√≥n eliminada estaba sin leer\r\n            if (!deletedNotification.is_read) {\r\n              setUnreadCount(prev => Math.max(0, prev - 1));\r\n            }\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [userId, loadNotifications, notifications]);\r\n\r\n  return {\r\n    notifications,\r\n    unreadCount,\r\n    loading: loading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n    reload: loadNotifications\r\n  };\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/achra/proyectos/app-hotel-nueva/src/app/hotel-gallery/%5Bid%5D/page.tsx"],"sourcesContent":["// src/app/hotel-gallery/[id]/page.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { supabase } from \"../../../lib/supabaseClient\";\r\nimport { useNotifications } from '../../../hooks/useNotifications';\r\n\r\ninterface MediaItem {\r\n  id: string;\r\n  url: string;\r\n  type: string;\r\n  tags?: string[];\r\n  category?: string;\r\n  quality_score?: number;\r\n  created_at: string;\r\n}\r\n\r\ninterface Hotel {\r\n  id: string;\r\n  name: string;\r\n  stars?: number;\r\n  hotel_type?: string;\r\n  address?: string;\r\n  city?: string;\r\n  province?: string;\r\n  country?: string;\r\n  profile_image?: string;\r\n}\r\n\r\n// Componente NotificationsDropdown - VERSI√ìN COMPLETA SIN CHECK\r\ninterface Notification {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  date: string;\r\n  read?: boolean;\r\n}\r\n\r\ninterface NotificationsDropdownProps {\r\n  notifications: Notification[];\r\n  unreadCount: number;\r\n  loading: boolean;\r\n  markAsRead: (id: string) => void;\r\n  markAllAsRead: () => void;\r\n  deleteNotification: (id: string) => void;\r\n}\r\n\r\nconst NotificationsDropdown = ({ \r\n  notifications, \r\n  unreadCount, \r\n  loading, \r\n  markAsRead, \r\n  markAllAsRead, \r\n  deleteNotification \r\n}: NotificationsDropdownProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      const target = event.target as HTMLElement;\r\n      if (!target.closest('.notifications-dropdown')) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"notifications-dropdown relative\">\r\n      {/* Bot√≥n campana con efecto hover */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-gray-600 hover:text-blue-600 transition-all hover:-translate-y-0.5\"\r\n      >\r\n        {/* Bell Icon */}\r\n        <svg\r\n          className=\"w-6 h-6\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"1.8\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M14.857 17.657A2 2 0 0113 19H11a2 2 0 01-1.857-1.343M6 8a6 6 0 1112 0c0 3.5 1.5 5 2 5.5H4c.5-.5 2-2 2-5.5z\"\r\n          />\r\n        </svg>\r\n\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-semibold w-5 h-5 rounded-full flex items-center justify-center shadow\">\r\n            {unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-3 w-96 bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden z-50 animate-fade-in-down\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50\">\r\n            <h3 className=\"font-semibold text-gray-900\">Notificaciones</h3>\r\n\r\n            {unreadCount > 0 && (\r\n              <button\r\n                onClick={markAllAsRead}\r\n                className=\"text-xs font-medium text-blue-600 hover:text-blue-700 hover:underline\"\r\n              >\r\n                Marcar todo como le√≠do\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Loading */}\r\n          {loading && (\r\n            <div className=\"p-6 text-center text-gray-500 text-sm\">\r\n              <div className=\"w-6 h-6 mx-auto mb-2 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n              Cargando notificaciones...\r\n            </div>\r\n          )}\r\n\r\n          {/* Empty */}\r\n          {!loading && notifications.length === 0 && (\r\n            <div className=\"p-6 text-center text-gray-500 text-sm\">\r\n              <div className=\"text-5xl mb-3 opacity-30\">üîî</div>\r\n              No hay notificaciones\r\n            </div>\r\n          )}\r\n\r\n          {/* List - SIN ICONO DE CHECK */}\r\n          {!loading && notifications.length > 0 && (\r\n            <div className=\"max-h-96 overflow-y-auto divide-y divide-gray-100\">\r\n              {notifications.map((n) => (\r\n                <div\r\n                  key={n.id}\r\n                  className={`flex items-start gap-3 px-4 py-4 transition-all cursor-pointer ${\r\n                    !n.read ? \"bg-blue-50\" : \"hover:bg-gray-50\"\r\n                  }`}\r\n                  onClick={() => !n.read && markAsRead(n.id)}\r\n                >\r\n                  {/* Indicador de no le√≠do */}\r\n                  <div className=\"pt-1\">\r\n                    {!n.read && (\r\n                      <span className=\"block w-2 h-2 bg-blue-600 rounded-full animate-pulse\"></span>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Contenido */}\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-semibold text-gray-900\">\r\n                      {n.title}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-600 mt-1\">{n.message}</p>\r\n                    <p className=\"text-[11px] text-gray-400 mt-1\">{n.date}</p>\r\n                  </div>\r\n\r\n                  {/* SOLO BOT√ìN DE ELIMINAR */}\r\n                  <div className=\"flex items-start\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        deleteNotification(n.id);\r\n                      }}\r\n                      className=\"text-gray-400 hover:text-red-600 hover:scale-110 transition-transform\"\r\n                      title=\"Eliminar\"\r\n                    >\r\n                      {/* X Icon */}\r\n                      <svg\r\n                        className=\"w-4 h-4\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          d=\"M6 18L18 6M6 6l12 12\"\r\n                        />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function HotelGalleryPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const hotelId = params.id as string;\r\n\r\n  const [hotel, setHotel] = useState<Hotel | null>(null);\r\n  const [media, setMedia] = useState<MediaItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\r\n  const [expandedImage, setExpandedImage] = useState<string | null>(null);\r\n  const [showErrorReport, setShowErrorReport] = useState<string | null>(null);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n\r\n  // Hook de notificaciones\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    loading: notificationsLoading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n  } = useNotifications(userId);\r\n\r\n  // Selecci√≥n m√∫ltiple\r\n  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n\r\n  const toggleSelectImage = (id: string) => {\r\n    setSelectedImages((prev) =>\r\n      prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  // Nuevo: Correcci√≥n de categor√≠as problem√°ticas\r\n  const getCorrectedCategory = (item: MediaItem) => {\r\n    // Regla de negocio cr√≠tica: Si tiene tag \"restaurant\", debe ser categor√≠a \"restaurante\"\r\n    if (item.tags?.includes(\"restaurant\")) {\r\n      return \"restaurante\";\r\n    }\r\n    \r\n    // Regla de negocio: Si tiene tag \"suite\", debe ser categor√≠a \"habitaciones\"\r\n    if (item.tags?.includes(\"suite\")) {\r\n      return \"habitaciones\";\r\n    }\r\n    \r\n    return item.category;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadGallery = async () => {\r\n      try {\r\n        const { data: sessionData } = await supabase.auth.getSession();\r\n        if (!sessionData?.session) {\r\n          router.push(\"/login\");\r\n          return;\r\n        }\r\n\r\n        const userId = sessionData.session.user.id;\r\n        setUserId(userId);\r\n\r\n        const { data: orgData } = await supabase\r\n          .from(\"organizations\")\r\n          .select(\"id, role\")\r\n          .eq(\"created_by\", userId)\r\n          .maybeSingle();\r\n\r\n        if (!orgData || orgData.role !== \"agency\") {\r\n          router.push(\"/dashboard\");\r\n          return;\r\n        }\r\n\r\n        const { data: accessData } = await supabase\r\n          .from(\"agency_hotel_access\")\r\n          .select(\"status\")\r\n          .eq(\"agency_id\", orgData.id)\r\n          .eq(\"hotel_id\", hotelId)\r\n          .maybeSingle();\r\n\r\n        if (!accessData || accessData.status !== \"approved\") {\r\n          alert(\"No tienes acceso a este hotel\");\r\n          router.push(\"/dashboard\");\r\n          return;\r\n        }\r\n\r\n        const { data: hotelData } = await supabase\r\n          .from(\"organizations\")\r\n          .select(\"*\")\r\n          .eq(\"id\", hotelId)\r\n          .maybeSingle();\r\n\r\n        if (!hotelData) {\r\n          router.push(\"/dashboard\");\r\n          return;\r\n        }\r\n\r\n        setHotel(hotelData as Hotel);\r\n\r\n        const { data: mediaData } = await supabase\r\n          .from(\"media\")\r\n          .select(\"id, url, type, tags, category, quality_score, created_at\")\r\n          .eq(\"hotel_id\", hotelId)\r\n          .order(\"created_at\", { ascending: false });\r\n\r\n        const sortedMedia = [...(mediaData || [])].sort((a, b) => {\r\n          const qa = a.quality_score ?? 0;\r\n          const qb = b.quality_score ?? 0;\r\n          return qb - qa;\r\n        });\r\n\r\n        setMedia(sortedMedia);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Error loading gallery:\", err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (hotelId) loadGallery();\r\n  }, [hotelId, router]);\r\n\r\n  const filteredMedia =\r\n    selectedCategory === \"all\"\r\n      ? media\r\n      : media.filter((m) => getCorrectedCategory(m) === selectedCategory);\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut();\r\n    router.push(\"/\");\r\n  };\r\n\r\n  const goBack = () => {\r\n    router.push(\"/dashboard\");\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex justify-center items-center bg-gray-50\">\r\n        <div className=\"p-8 bg-white rounded-xl shadow-sm text-center\">\r\n          <div className=\"w-8 h-8 mx-auto mb-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          <p className=\"text-gray-600 text-base\">Cargando galer√≠a...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!hotel) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 font-sans\">\r\n      {/* SIDEBAR IZQUIERDO - AZUL GRADIENTE */}\r\n      <aside className=\"w-72 bg-gradient-to-b from-blue-800 to-blue-900 text-white p-6 fixed left-0 top-0 h-screen flex flex-col\">\r\n        {/* Header con logo */}\r\n        <div className=\"flex items-center mb-8 pb-3 border-b border-white/10\">\r\n          <h1 className=\"text-xl font-bold tracking-tight\">Hotel Media Bank</h1>\r\n        </div>\r\n\r\n        {/* User profile mini */}\r\n        {hotel && (\r\n          <div className=\"bg-blue-100 rounded-xl p-4 mb-8 shadow-sm\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-12 h-12 rounded-full overflow-hidden flex-shrink-0\">\r\n                <img\r\n                  src={hotel.profile_image || `https://ui-avatars.com/api/?name=${encodeURIComponent(hotel.name)}&background=3b82f6&color=white`}\r\n                  alt={hotel.name}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"text-sm font-semibold text-blue-900 truncate mb-0.5\">\r\n                  {hotel.name}\r\n                </h3>\r\n                <p className=\"text-xs text-gray-600 capitalize\">\r\n                  Hotel\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Navigation menu */}\r\n        <nav className=\"flex-1 flex flex-col gap-2 mb-8\">\r\n          <div \r\n            onClick={goBack}\r\n            className=\"px-4 py-3.5 rounded-lg cursor-pointer font-medium text-sm transition-all text-white/80 hover:bg-white/10 flex items-center gap-2\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n            </svg>\r\n            <span>Volver al Dashboard</span>\r\n          </div>\r\n        </nav>\r\n\r\n        {/* Logout button */}\r\n        <div className=\"mt-auto pt-5 border-t border-white/10\">\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center justify-center gap-2 py-0.5 text-blue-200/90 hover:text-white transition-colors text-sm font-medium\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\r\n            </svg>\r\n            Cerrar Sesi√≥n\r\n          </button>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* MAIN CONTENT */}\r\n      <main className=\"ml-72 p-6\">\r\n        {/* TOP BAR - MEJORADA */}\r\n        <div className=\"fixed top-0 left-72 right-0 h-16 bg-white shadow-sm flex items-center justify-between px-8 z-40\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"text-sm text-gray-500 uppercase font-semibold\">\r\n              Galer√≠a del Hotel\r\n            </span>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-4\">\r\n            {/* Notifications Dropdown */}\r\n            <NotificationsDropdown\r\n              notifications={notifications}\r\n              unreadCount={unreadCount}\r\n              loading={notificationsLoading}\r\n              markAsRead={markAsRead}\r\n              markAllAsRead={markAllAsRead}\r\n              deleteNotification={deleteNotification}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main content with top padding */}\r\n        <div className=\"pt-24\">\r\n          <div className=\"max-w-7xl mx-auto px-4\">\r\n\r\n            {/* Filtro */}\r\n            <div className=\"mb-8 flex flex-wrap gap-2\">\r\n              {[\r\n                { key: \"all\", label: \"Todas\" },\r\n                { key: \"exterior\", label: \"Exterior\" },\r\n                { key: \"habitaciones\", label: \"Habitaciones\" },\r\n                { key: \"interior\", label: \"Interior\" },\r\n                { key: \"salas_comunes\", label: \"Salas comunes\" },\r\n                { key: \"restaurante\", label: \"Restaurante\" },\r\n                { key: \"piscina\", label: \"Piscina\" },\r\n                { key: \"spa\", label: \"Spa\" },\r\n                { key: \"otros\", label: \"Otros\" },\r\n              ].map((cat) => (\r\n                <button\r\n                  key={cat.key}\r\n                  onClick={() => setSelectedCategory(cat.key)}\r\n                  className={`px-4 py-2 rounded-full text-sm font-medium border transition-all ${\r\n                    selectedCategory === cat.key\r\n                      ? \"bg-blue-600 text-white border-blue-600 shadow-sm\"\r\n                      : \"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100\"\r\n                  }`}\r\n                >\r\n                  {cat.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Bot√≥n de descarga por categor√≠a */}\r\n            {selectedCategory !== \"all\" && (\r\n              <a\r\n                href={`/api/download-category?hotel=${hotelId}&category=${selectedCategory}`}\r\n                className=\"inline-block mb-6 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition\"\r\n              >\r\n                Descargar categor√≠a\r\n              </a>\r\n            )}\r\n\r\n            {/* Bot√≥n de descarga de galer√≠a completa */}\r\n            {selectedCategory === \"all\" && (\r\n              <a\r\n                href={`/api/download-gallery?hotel=${hotelId}`}\r\n                className=\"inline-block mb-6 px-4 py-2 bg-gray-700 text-white rounded-lg text-sm font-medium hover:bg-gray-800\"\r\n              >\r\n                Descargar galer√≠a completa\r\n              </a>\r\n            )}\r\n\r\n            {/* Bot√≥n de descarga selecci√≥n */}\r\n            {selectedImages.length > 0 && (\r\n              <a\r\n                href={`/api/download-selection?ids=${selectedImages.join(\",\")}`}\r\n                className=\"inline-block mb-6 ml-3 px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition\"\r\n              >\r\n                Descargar selecci√≥n ({selectedImages.length})\r\n              </a>\r\n            )}\r\n\r\n            {/* Grid */}\r\n            {filteredMedia.length === 0 ? (\r\n              // Mensaje de \"sin contenido\" mejorado para est√©tica B2B\r\n              <div className=\"text-center py-12 bg-gray-50 rounded-xl border border-gray-200\">\r\n                <h3 className=\"text-xl font-medium text-gray-700 mb-2\">\r\n                  {selectedCategory === \"all\"\r\n                    ? \"Sin contenido multimedia\"\r\n                    : `No hay contenido en \"${selectedCategory.replace(\"_\", \" \")}\"`}\r\n                </h3>\r\n                <p className=\"text-gray-500 text-base\">\r\n                  {selectedCategory === \"all\"\r\n                    ? \"Este hotel a√∫n no ha subido fotos o videos.\"\r\n                    : \"No hay contenido en esta categor√≠a.\"}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                {filteredMedia.map((item) => (\r\n                  <div\r\n                    key={item.id}\r\n                    className={`bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer ${\r\n                      selectedImages.includes(item.id) \r\n                        ? 'ring-2 ring-blue-500 ring-offset-2 scale-[1.01] shadow-md' \r\n                        : 'hover:scale-[1.01]'\r\n                    }`}\r\n                    onClick={() => setExpandedImage(item.url)}\r\n                  >\r\n                    <div className=\"relative group\">\r\n\r\n                      {/* Checkbox con animaci√≥n mejorada */}\r\n                      <label\r\n                        htmlFor={`select-${item.id}`}\r\n                        className=\"absolute top-3 right-3 z-20 cursor-pointer\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                      >\r\n                        <input\r\n                          id={`select-${item.id}`}\r\n                          type=\"checkbox\"\r\n                          checked={selectedImages.includes(item.id)}\r\n                          onChange={() => toggleSelectImage(item.id)}\r\n                          className=\"hidden\"\r\n                        />\r\n                        \r\n                        {/* C√≠rculo exterior con animaci√≥n */}\r\n                        <div \r\n                          className={`relative w-6 h-6 rounded-full border-2 transition-all duration-300 ${\r\n                            selectedImages.includes(item.id)\r\n                              ? 'border-blue-500 bg-blue-50'\r\n                              : 'border-gray-300 bg-white hover:border-blue-400'\r\n                          } flex items-center justify-center`}\r\n                        >\r\n                          {/* Punto central con animaci√≥n de escala */}\r\n                          <div \r\n                            className={`w-3 h-3 rounded-full transition-all duration-300 transform ${\r\n                              selectedImages.includes(item.id)\r\n                                ? 'bg-blue-500 scale-100 opacity-100'\r\n                                : 'bg-gray-300 scale-0 opacity-0'\r\n                            }`}\r\n                          />\r\n                        </div>\r\n                      </label>\r\n\r\n                      <img\r\n                        src={item.url}\r\n                        alt={item.category || \"Hotel media\"}\r\n                        className=\"w-full h-64 object-cover transition-transform duration-300 group-hover:scale-105\"\r\n                      />\r\n                      \r\n                      {/* Nuevo: Alerta de clasificaci√≥n incorrecta */}\r\n                      {item.category !== getCorrectedCategory(item) && (\r\n                        <div className=\"absolute top-3 left-3 bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full font-medium z-10\">\r\n                          <span className=\"flex items-center gap-1\">\r\n                            <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n                            </svg>\r\n                            Corregir categor√≠a\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* INFO + ICONO DE DESCARGA */}\r\n                    <div className=\"p-4 bg-gray-50 border-t border-gray-200 flex justify-between items-start\">\r\n                      <div className=\"flex-1\">\r\n                        {/* Usamos la categor√≠a corregida */}\r\n                        {getCorrectedCategory(item) && (\r\n                          <p className=\"text-xs font-semibold text-blue-600 mb-2 capitalize\">\r\n                            {getCorrectedCategory(item).replace(\"_\", \" \")}\r\n                          </p>\r\n                        )}\r\n\r\n                        <div className=\"flex flex-wrap gap-1 mb-2\">\r\n                          {item.tags?.slice(0, 3).map((tag) => (\r\n                            <span\r\n                              key={tag}\r\n                              className=\"bg-blue-50 text-blue-600 text-xs px-2 py-0.5 rounded\"\r\n                            >\r\n                              {tag}\r\n                            </span>\r\n                          ))}\r\n                          {item.tags && item.tags.length > 3 && (\r\n                            <span className=\"text-gray-400 text-xs\">\r\n                              +{item.tags.length - 3}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n\r\n                        <p className=\"text-xs text-gray-500\">\r\n                          {item.type === \"video\" ? \"Video\" : \"Foto\"} ‚Äî{\" \"}\r\n                          {new Date(item.created_at).toLocaleDateString()}\r\n                        </p>\r\n                      </div>\r\n\r\n                      <a\r\n                        href={`/api/download?url=${encodeURIComponent(item.url)}&id=${item.id}`}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        className=\"ml-3 text-gray-400 hover:text-blue-600 transition\"\r\n                        title=\"Descargar\"\r\n                      >\r\n                        <svg\r\n                          className=\"w-6 h-6\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                          viewBox=\"0 0 24 24\"\r\n                        >\r\n                          <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            d=\"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4\"\r\n                          />\r\n                        </svg>\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      {/* Modal */}\r\n      {expandedImage && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4\"\r\n          onClick={() => setExpandedImage(null)}\r\n        >\r\n          <div className=\"relative max-w-4xl w-full\">\r\n            <button\r\n              onClick={() => setExpandedImage(null)}\r\n              className=\"absolute top-4 right-4 text-white hover:text-gray-300 transition\"\r\n            >\r\n              <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n\r\n            <img\r\n              src={expandedImage}\r\n              alt=\"Expanded view\"\r\n              className=\"w-full max-h-[80vh] object-contain\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Nuevo: Componente de correcci√≥n de errores */}\r\n      {showErrorReport && (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-xl shadow-xl w-full max-w-md\">\r\n            <div className=\"p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Corregir clasificaci√≥n</h3>\r\n              \r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Categor√≠a actual\r\n                </label>\r\n                <div className=\"bg-gray-50 border border-gray-300 rounded-lg p-2\">\r\n                  {media.find(m => m.id === showErrorReport)?.category?.replace(\"_\", \" \") || \"N/A\"}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Categor√≠a correcta\r\n                </label>\r\n                <select \r\n                  className=\"w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  defaultValue={media.find(m => m.id === showErrorReport)?.category}\r\n                >\r\n                  <option value=\"habitaciones\">Habitaciones</option>\r\n                  <option value=\"restaurante\">Restaurante</option>\r\n                  <option value=\"exterior\">Exterior</option>\r\n                  <option value=\"interior\">Interior</option>\r\n                  <option value=\"salas_comunes\">Salas comunes</option>\r\n                  <option value=\"piscina\">Piscina</option>\r\n                  <option value=\"spa\">Spa</option>\r\n                  <option value=\"otros\">Otros</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end gap-3\">\r\n                <button\r\n                  onClick={() => setShowErrorReport(null)}\r\n                  className=\"px-4 py-2 text-gray-700 hover:text-gray-900 border border-gray-300 rounded-lg transition\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    // Aqu√≠ ir√≠a la l√≥gica para reportar el error\r\n                    console.log(\"Reportando error de clasificaci√≥n\");\r\n                    setShowErrorReport(null);\r\n                  }}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\r\n                >\r\n                  Confirmar correcci√≥n\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Estilos globales para animaciones */}\r\n      <style jsx global>{`\r\n        @keyframes fade-in-down {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(-10px);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0);\r\n          }\r\n        }\r\n        .animate-fade-in-down {\r\n          animation: fade-in-down 0.2s ease-out;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}